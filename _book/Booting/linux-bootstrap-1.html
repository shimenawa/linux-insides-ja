
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>From bootloader to kernel Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="linux-bootstrap-2.html" />
    
    
    <link rel="prev" href="./" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        <li class="header">Summary</li>
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="./">
            
                <a href="./">
            
                    
                    Booting
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="1.2.1" data-path="linux-bootstrap-1.html">
            
                <a href="linux-bootstrap-1.html">
            
                    
                    From bootloader to kernel
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="linux-bootstrap-2.html">
            
                <a href="linux-bootstrap-2.html">
            
                    
                    First steps in the kernel setup code
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="linux-bootstrap-3.html">
            
                <a href="linux-bootstrap-3.html">
            
                    
                    Video mode initialization and transition to protected mode
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="linux-bootstrap-4.html">
            
                <a href="linux-bootstrap-4.html">
            
                    
                    Transition to 64-bit mode
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="linux-bootstrap-5.html">
            
                <a href="linux-bootstrap-5.html">
            
                    
                    Kernel decompression
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../Initialization/">
            
                <a href="../Initialization/">
            
                    
                    Initialization
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../Initialization/linux-initialization-1.html">
            
                <a href="../Initialization/linux-initialization-1.html">
            
                    
                    First steps in the kernel
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../Initialization/linux-initialization-2.html">
            
                <a href="../Initialization/linux-initialization-2.html">
            
                    
                    Early interrupts handler
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../Initialization/linux-initialization-3.html">
            
                <a href="../Initialization/linux-initialization-3.html">
            
                    
                    Last preparations before the kernel entry point
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="../Initialization/linux-initialization-4.html">
            
                <a href="../Initialization/linux-initialization-4.html">
            
                    
                    Kernel entry point
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="../Initialization/linux-initialization-5.html">
            
                <a href="../Initialization/linux-initialization-5.html">
            
                    
                    Continue architecture-specific boot-time initializations
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.6" data-path="../Initialization/linux-initialization-6.html">
            
                <a href="../Initialization/linux-initialization-6.html">
            
                    
                    Architecture-specific initializations, again...
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.7" data-path="../Initialization/linux-initialization-7.html">
            
                <a href="../Initialization/linux-initialization-7.html">
            
                    
                    End of the architecture-specific initializations, almost...
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.8" data-path="../Initialization/linux-initialization-8.html">
            
                <a href="../Initialization/linux-initialization-8.html">
            
                    
                    Scheduler initialization
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.9" data-path="../Initialization/linux-initialization-9.html">
            
                <a href="../Initialization/linux-initialization-9.html">
            
                    
                    RCU initialization
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.10" data-path="../Initialization/linux-initialization-10.html">
            
                <a href="../Initialization/linux-initialization-10.html">
            
                    
                    End of initialization
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../interrupts/">
            
                <a href="../interrupts/">
            
                    
                    Interrupts
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../interrupts/interrupts-1.html">
            
                <a href="../interrupts/interrupts-1.html">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../interrupts/interrupts-2.html">
            
                <a href="../interrupts/interrupts-2.html">
            
                    
                    Start to dive into interrupts
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../interrupts/interrupts-3.html">
            
                <a href="../interrupts/interrupts-3.html">
            
                    
                    Interrupt handlers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="../interrupts/interrupts-4.html">
            
                <a href="../interrupts/interrupts-4.html">
            
                    
                    Initialization of non-early interrupt gates
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="../interrupts/interrupts-5.html">
            
                <a href="../interrupts/interrupts-5.html">
            
                    
                    Implementation of some exception handlers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.6" data-path="../interrupts/interrupts-6.html">
            
                <a href="../interrupts/interrupts-6.html">
            
                    
                    Handling Non-Maskable interrupts
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.7" data-path="../interrupts/interrupts-7.html">
            
                <a href="../interrupts/interrupts-7.html">
            
                    
                    Dive into external hardware interrupts
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.8" data-path="../interrupts/interrupts-8.html">
            
                <a href="../interrupts/interrupts-8.html">
            
                    
                    Initialization of external hardware interrupts structures
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.9" data-path="../interrupts/interrupts-9.html">
            
                <a href="../interrupts/interrupts-9.html">
            
                    
                    Softirq, Tasklets and Workqueues
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.10" data-path="../interrupts/interrupts-10.html">
            
                <a href="../interrupts/interrupts-10.html">
            
                    
                    Last part
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../SysCall/">
            
                <a href="../SysCall/">
            
                    
                    System calls
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../SysCall/syscall-1.html">
            
                <a href="../SysCall/syscall-1.html">
            
                    
                    Introduction to system calls
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../SysCall/syscall-2.html">
            
                <a href="../SysCall/syscall-2.html">
            
                    
                    How the Linux kernel handles a system call
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="../SysCall/syscall-3.html">
            
                <a href="../SysCall/syscall-3.html">
            
                    
                    vsyscall and vDSO
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="../SysCall/syscall-4.html">
            
                <a href="../SysCall/syscall-4.html">
            
                    
                    How the Linux kernel runs a program
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.5" data-path="../SysCall/syscall-5.html">
            
                <a href="../SysCall/syscall-5.html">
            
                    
                    Implementation of the open system call
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../Timers/">
            
                <a href="../Timers/">
            
                    
                    Timers and time management
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../Timers/timers-1.html">
            
                <a href="../Timers/timers-1.html">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../Timers/timers-2.html">
            
                <a href="../Timers/timers-2.html">
            
                    
                    Clocksource framework
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="../Timers/timers-3.html">
            
                <a href="../Timers/timers-3.html">
            
                    
                    The tick broadcast framework and dyntick
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="../Timers/timers-4.html">
            
                <a href="../Timers/timers-4.html">
            
                    
                    Introduction to timers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5" data-path="../Timers/timers-5.html">
            
                <a href="../Timers/timers-5.html">
            
                    
                    Clockevents framework
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.6" data-path="../Timers/timers-6.html">
            
                <a href="../Timers/timers-6.html">
            
                    
                    x86 related clock sources
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.7" data-path="../Timers/timers-7.html">
            
                <a href="../Timers/timers-7.html">
            
                    
                    Time related system calls
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../SyncPrim/">
            
                <a href="../SyncPrim/">
            
                    
                    Synchronization primitives
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="../SyncPrim/sync-1.html">
            
                <a href="../SyncPrim/sync-1.html">
            
                    
                    Introduction to spinlocks
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="../SyncPrim/sync-2.html">
            
                <a href="../SyncPrim/sync-2.html">
            
                    
                    Queued spinlocks
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="../SyncPrim/sync-3.html">
            
                <a href="../SyncPrim/sync-3.html">
            
                    
                    Semaphores
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4" data-path="../SyncPrim/sync-4.html">
            
                <a href="../SyncPrim/sync-4.html">
            
                    
                    Mutex
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.5" data-path="../SyncPrim/sync-5.html">
            
                <a href="../SyncPrim/sync-5.html">
            
                    
                    Reader/Writer semaphores
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.6" data-path="../SyncPrim/sync-6.html">
            
                <a href="../SyncPrim/sync-6.html">
            
                    
                    SeqLock
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.7" >
            
                <span>
            
                    
                    RCU
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.8" >
            
                <span>
            
                    
                    Lockdep
            
                </span>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../mm/">
            
                <a href="../mm/">
            
                    
                    Memory management
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="../mm/linux-mm-1.html">
            
                <a href="../mm/linux-mm-1.html">
            
                    
                    Memblock
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="../mm/linux-mm-2.html">
            
                <a href="../mm/linux-mm-2.html">
            
                    
                    Fixmaps and ioremap
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3" data-path="../mm/linux-mm-3.html">
            
                <a href="../mm/linux-mm-3.html">
            
                    
                    kmemcheck
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="../Cgroups/">
            
                <a href="../Cgroups/">
            
                    
                    Cgroups
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" data-path="../Cgroups/cgroups1.html">
            
                <a href="../Cgroups/cgroups1.html">
            
                    
                    Introduction to Control Groups
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10" >
            
                <span>
            
                    
                    SMP
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="../Concepts/">
            
                <a href="../Concepts/">
            
                    
                    Concepts
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.11.1" data-path="../Concepts/per-cpu.html">
            
                <a href="../Concepts/per-cpu.html">
            
                    
                    Per-CPU variables
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.2" data-path="../Concepts/cpumask.html">
            
                <a href="../Concepts/cpumask.html">
            
                    
                    Cpumasks
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.3" data-path="../Concepts/initcall.html">
            
                <a href="../Concepts/initcall.html">
            
                    
                    The initcall mechanism
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="../DataStructures/">
            
                <a href="../DataStructures/">
            
                    
                    Data Structures in the Linux Kernel
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.1" data-path="../DataStructures/dlist.html">
            
                <a href="../DataStructures/dlist.html">
            
                    
                    Doubly linked list
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.2" data-path="../DataStructures/radix-tree.html">
            
                <a href="../DataStructures/radix-tree.html">
            
                    
                    Radix tree
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.3" data-path="../DataStructures/bitmap.html">
            
                <a href="../DataStructures/bitmap.html">
            
                    
                    Bit arrays
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.13" data-path="../Theory/">
            
                <a href="../Theory/">
            
                    
                    Theory
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.13.1" data-path="../Theory/Paging.html">
            
                <a href="../Theory/Paging.html">
            
                    
                    Paging
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.2" data-path="../Theory/ELF.html">
            
                <a href="../Theory/ELF.html">
            
                    
                    Elf64
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.3" data-path="../Theory/asm.html">
            
                <a href="../Theory/asm.html">
            
                    
                    Inline assembly
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.4" >
            
                <span>
            
                    
                    CPUID
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.5" >
            
                <span>
            
                    
                    MSR
            
                </span>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.14" >
            
                <span>
            
                    
                    Initial ram disk
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.14.1" >
            
                <span>
            
                    
                    initrd
            
                </span>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.15" data-path="../Misc/">
            
                <a href="../Misc/">
            
                    
                    Misc
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.15.1" data-path="../Misc/how_kernel_compiled.html">
            
                <a href="../Misc/how_kernel_compiled.html">
            
                    
                    How the kernel is compiled
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.2" data-path="../Misc/linkers.html">
            
                <a href="../Misc/linkers.html">
            
                    
                    Linkers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.3" data-path="../Misc/contribute.html">
            
                <a href="../Misc/contribute.html">
            
                    
                    Linux kernel development
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.4" data-path="../Misc/program_startup.html">
            
                <a href="../Misc/program_startup.html">
            
                    
                    Program startup process in userspace
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.5" >
            
                <span>
            
                    
                    Write and Submit your first Linux kernel Patch
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.6" >
            
                <span>
            
                    
                    Data types in the kernel
            
                </span>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.16" data-path="../KernelStructures/">
            
                <a href="../KernelStructures/">
            
                    
                    KernelStructures
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.16.1" data-path="../KernelStructures/idt.html">
            
                <a href="../KernelStructures/idt.html">
            
                    
                    IDT
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.17" data-path="../LINKS.html">
            
                <a href="../LINKS.html">
            
                    
                    Useful links
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18" data-path="../contributors.html">
            
                <a href="../contributors.html">
            
                    
                    Contributors
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >From bootloader to kernel</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="kernel-booting-process-part-1">Kernel booting process. Part 1.</h1>
<h2 id="&#x30D6;&#x30FC;&#x30C8;&#x30ED;&#x30FC;&#x30C0;&#x30FC;&#x304B;&#x3089;&#x30AB;&#x30FC;&#x30CD;&#x30EB;&#x307E;&#x3067;">&#x30D6;&#x30FC;&#x30C8;&#x30ED;&#x30FC;&#x30C0;&#x30FC;&#x304B;&#x3089;&#x30AB;&#x30FC;&#x30CD;&#x30EB;&#x307E;&#x3067;</h2>
<p>&#x3082;&#x3057;&#x79C1;&#x306E;&#x30D6;&#x30ED;&#x30B0;&#x306E;<a href="http://0xax.blogspot.com/search/label/asm" target="_blank">&#x8A18;&#x4E8B;</a>&#x3092;&#x8AAD;&#x307E;&#x308C;&#x305F;&#x65B9;&#x306F;&#x3054;&#x5B58;&#x3058;&#x304B;&#x3068;&#x601D;&#x3044;&#x307E;&#x3059;&#x304C;&#x3001;&#x3061;&#x3087;&#x3063;&#x3068;&#x524D;&#x304B;&#x3089;&#x4F4E;&#x30EC;&#x30A4;&#x30E4;&#x30FC;&#x306E;&#x30D7;&#x30ED;&#x30B0;&#x30E9;&#x30DF;&#x30F3;&#x30B0;&#x3092;&#x884C;&#x3063;&#x3066;&#x3044;&#x307E;&#x3059;&#x3002;
Linux&#x7528;x86_64&#x30A2;&#x30BB;&#x30F3;&#x30D6;&#x30EA;&#x306B;&#x3088;&#x308B;&#x30D7;&#x30ED;&#x30B0;&#x30E9;&#x30DF;&#x30F3;&#x30B0;&#x306B;&#x3064;&#x3044;&#x3066;&#x8A18;&#x4E8B;&#x3092;&#x66F8;&#x3044;&#x3066;&#x3044;&#x3066;&#x3001;Linux&#x306E;&#x30BD;&#x30FC;&#x30B9;&#x30B3;&#x30FC;&#x30C9;&#x306B;&#x3082;&#x89E6;&#x308C;&#x308B;&#x3088;&#x3046;&#x306B;&#x306A;&#x308A;&#x307E;&#x3057;&#x305F;&#x3002;
&#x4F4E;&#x30EC;&#x30A4;&#x30E4;&#x30FC;&#x304C;&#x3069;&#x306E;&#x3088;&#x3046;&#x306B;&#x6A5F;&#x80FD;&#x3057;&#x3066;&#x3044;&#x308B;&#x306E;&#x304B;&#x3001;&#x30B3;&#x30F3;&#x30D4;&#x30E5;&#x30FC;&#x30BF;&#x3067;&#x30D7;&#x30ED;&#x30B0;&#x30E9;&#x30E0;&#x304C;&#x3069;&#x306E;&#x3088;&#x3046;&#x306B;&#x5B9F;&#x884C;&#x3055;&#x308C;&#x308B;&#x306E;&#x304B;&#x3001;&#x3069;&#x306E;&#x3088;&#x3046;&#x306B;&#x30E1;&#x30E2;&#x30EA;&#x306B;&#x914D;&#x7F6E;&#x3055;&#x308C;&#x308B;&#x306E;&#x304B;&#x3001;&#x30AB;&#x30FC;&#x30CD;&#x30EB;&#x304C;&#x3069;&#x306E;&#x3088;&#x3046;&#x306B;&#x30D7;&#x30ED;&#x30BB;&#x30B9;&#x3068;&#x30E1;&#x30E2;&#x30EA;&#x3092;&#x6271;&#x3046;&#x306E;&#x304B;&#x3001;&#x4F4E;&#x30EC;&#x30A4;&#x30E4;&#x30FC;&#x3067;&#x30CD;&#x30C3;&#x30C8;&#x30EF;&#x30FC;&#x30AF;&#x30B9;&#x30BF;&#x30C3;&#x30AF;&#x304C;&#x3069;&#x306E;&#x3088;&#x3046;&#x306B;&#x52D5;&#x304F;&#x306E;&#x304B;&#x7B49;&#x3001;&#x591A;&#x304F;&#x306E;&#x3053;&#x3068;&#x3092;&#x7406;&#x89E3;&#x3057;&#x3088;&#x3046;&#x3068;&#x3068;&#x3066;&#x3082;&#x8208;&#x5473;&#x304C;&#x6E67;&#x3044;&#x3066;&#x3044;&#x307E;&#x3059;&#x3002;
&#x305D;&#x308C;&#x3067;&#x3001;<strong>x86_64</strong> &#x306E;Linux &#x30AB;&#x30FC;&#x30CD;&#x30EB;&#x306B;&#x3064;&#x3044;&#x3066;&#x306E;&#x30B7;&#x30EA;&#x30FC;&#x30BA;&#x3092;&#x66F8;&#x3053;&#x3046;&#x3068;&#x6C7A;&#x5FC3;&#x3057;&#x307E;&#x3057;&#x305F;&#x3002;</p>
<p>&#x79C1;&#x306F;&#x30D7;&#x30ED;&#x306E;&#x30AB;&#x30FC;&#x30CD;&#x30EB;&#x30D7;&#x30ED;&#x30B0;&#x30E9;&#x30DE;&#x3067;&#x306F;&#x306A;&#x3044;&#x3053;&#x3068;&#x3068;&#x3001;&#x4ED5;&#x4E8B;&#x3067;&#x3082;&#x30AB;&#x30FC;&#x30CD;&#x30EB;&#x306E;&#x30B3;&#x30FC;&#x30C9;&#x3092;&#x66F8;&#x3044;&#x3066;&#x3044;&#x306A;&#x3044;&#x3053;&#x3068;&#x3092;&#x3054;&#x4E86;&#x627F;&#x304F;&#x3060;&#x3055;&#x3044;&#x3002;
&#x305F;&#x3060;&#x306E;&#x8DA3;&#x5473;&#x3067;&#x3059;&#x3002;&#x79C1;&#x306F;&#x4F4E;&#x30EC;&#x30A4;&#x30E4;&#x30FC;&#x304C;&#x5358;&#x306B;&#x597D;&#x304D;&#x3067;&#x3001;&#x3069;&#x306E;&#x3088;&#x3046;&#x306B;&#x3057;&#x3066;&#x52D5;&#x3044;&#x3066;&#x3044;&#x308B;&#x306E;&#x304B;&#x3068;&#x3066;&#x3082;&#x8208;&#x5473;&#x304C;&#x3042;&#x308A;&#x307E;&#x3059;&#x3002;&#x3082;&#x3057;&#x4F55;&#x304B;&#x56F0;&#x60D1;&#x3057;&#x305F;&#x70B9;&#x3084;&#x3001;&#x3054;&#x8CEA;&#x554F;&#x3084;&#x3054;&#x610F;&#x898B;&#x304C;&#x3042;&#x308A;&#x307E;&#x3057;&#x305F;&#x3089;&#x3001;Twitter <a href="https://twitter.com/0xAX" target="_blank">0xAX</a> &#x3084; <a href="anotherworldofworld@gmail.com">email</a> &#x3067;&#x304A;&#x77E5;&#x3089;&#x305B;&#x3044;&#x305F;&#x3060;&#x304F;&#x304B;&#x3001;<a href="https://github.com/0xAX/linux-insides/issues/new" target="_blank">issue</a>&#x3092;&#x4F5C;&#x6210;&#x3057;&#x3066;&#x304F;&#x3060;&#x3055;&#x3044;&#x3002;
&#x305D;&#x3046;&#x3057;&#x3066;&#x304F;&#x308C;&#x308B;&#x3068;&#x52A9;&#x304B;&#x308A;&#x307E;&#x3059;&#x3002;&#x5168;&#x3066;&#x306E;&#x8A18;&#x4E8B;&#x306F; <a href="https://github.com/0xAX/linux-insides" target="_blank">linux-insides</a> &#x304B;&#x3089;&#x30A2;&#x30AF;&#x30BB;&#x30B9;&#x3067;&#x304D;&#x3001;&#x79C1;&#x306E;&#x82F1;&#x6587;&#x304C;&#x9593;&#x9055;&#x3063;&#x3066;&#x3044;&#x305F;&#x308A;&#x5185;&#x5BB9;&#x306B;&#x554F;&#x984C;&#x304C;&#x3042;&#x3063;&#x305F;&#x308A;&#x3057;&#x305F;&#x5834;&#x5408;&#x306F;&#x3001;&#x6C17;&#x8EFD;&#x306B;&#x30D7;&#x30EB;&#x30EA;&#x30AF;&#x30A8;&#x30B9;&#x30C8;&#x3092;&#x9001;&#x3063;&#x3066;&#x304F;&#x3060;&#x3055;&#x3044;&#x3002;</p>
<p><em>&#x3053;&#x308C;&#x306F;&#x6B63;&#x5F0F;&#x306A;&#x30C9;&#x30AD;&#x30E5;&#x30E1;&#x30F3;&#x30C8;&#x3067;&#x306F;&#x3042;&#x308A;&#x307E;&#x305B;&#x3093;&#x3002;&#x3042;&#x304F;&#x307E;&#x3067;&#x3082;&#x5B66;&#x7FD2;&#x306E;&#x305F;&#x3081;&#x3084;&#x77E5;&#x8B58;&#x5171;&#x6709;&#x306E;&#x305F;&#x3081;&#x306E;&#x3082;&#x306E;&#x3067;&#x3059;&#x306E;&#x3067;&#x3054;&#x6CE8;&#x610F;&#x304F;&#x3060;&#x3055;&#x3044;&#x3002;</em></p>
<p><strong>&#x5FC5;&#x8981;&#x306A;&#x77E5;&#x8B58;</strong></p>
<ul>
<li>C&#x30B3;&#x30FC;&#x30C9;&#x306E;&#x7406;&#x89E3;</li>
<li>&#x30A2;&#x30BB;&#x30F3;&#x30D6;&#x30EA;(AT&amp;T&#x8A18;&#x6CD5;)&#x306E;&#x7406;&#x89E3;</li>
</ul>
<p>&#x30C4;&#x30FC;&#x30EB;&#x306B;&#x3064;&#x3044;&#x3066;&#x5B66;&#x3073;&#x59CB;&#x3081;&#x3066;&#x3044;&#x308B;&#x4EBA;&#x306E;&#x305F;&#x3081;&#x306B;&#x3001;&#x3053;&#x306E;&#x8A18;&#x4E8B;&#x3068;&#x3064;&#x3065;&#x304F;&#x8A18;&#x4E8B;&#x306E;&#x4E2D;&#x3067;&#x8AAC;&#x660E;&#x3092;&#x5165;&#x308C;&#x3088;&#x3046;&#x3068;&#x601D;&#x3044;&#x307E;&#x3059;&#x3002;&#x3055;&#x3066;&#x3001;&#x7C21;&#x5358;&#x306A;&#x5C0E;&#x5165;&#x306F;&#x3053;&#x3053;&#x3067;&#x7D42;&#x308F;&#x308A;&#x306B;&#x3057;&#x3066;&#x3001;&#x4ECA;&#x304B;&#x3089;&#x30AB;&#x30FC;&#x30CD;&#x30EB;&#x3068;&#x4F4E;&#x30EC;&#x30A4;&#x30E4;&#x30FC;&#x306B;&#x30C0;&#x30A4;&#x30D6;&#x3057;&#x307E;&#x3057;&#x3087;&#x3046;&#x3002;</p>
<p>&#x5168;&#x3066;&#x306E;&#x30B3;&#x30FC;&#x30C9;&#x306F;&#x30AB;&#x30FC;&#x30CD;&#x30EB; 3.18&#x306E;&#x3082;&#x306E;&#x3067;&#x3059;&#x3002;&#x5909;&#x66F4;&#x304C;&#x3042;&#x3063;&#x305F;&#x5834;&#x5408;&#x306F;&#x3001;&#x79C1;&#x306F;&#x305D;&#x308C;&#x306B;&#x5FDC;&#x3058;&#x3066;&#x66F4;&#x65B0;&#x3057;&#x307E;&#x3059;&#x3002;</p>
<h2 id="&#x9B54;&#x6CD5;&#x306E;&#x96FB;&#x6E90;&#x30DC;&#x30BF;&#x30F3;&#x306E;&#x6B21;&#x306F;&#x306A;&#x306B;&#x304C;&#x8D77;&#x3053;&#x308B;&#x306E;&#x304B;&#xFF1F;">&#x9B54;&#x6CD5;&#x306E;&#x96FB;&#x6E90;&#x30DC;&#x30BF;&#x30F3;&#x306E;&#x6B21;&#x306F;&#x306A;&#x306B;&#x304C;&#x8D77;&#x3053;&#x308B;&#x306E;&#x304B;&#xFF1F;</h2>
<p>&#x672C;&#x9023;&#x8F09;&#x306F;Linux &#x30AB;&#x30FC;&#x30CD;&#x30EB;&#x3064;&#x3044;&#x3066;&#x306E;&#x30B7;&#x30EA;&#x30FC;&#x30BA;&#x3067;&#x3059;&#x304C;&#x3001;&#x30AB;&#x30FC;&#x30CD;&#x30EB;&#x306E;&#x30B3;&#x30FC;&#x30C9;&#x304B;&#x3089;&#x306F;&#x59CB;&#x3081;&#x307E;&#x305B;&#x3093;&#x3002; - &#x5C11;&#x306A;&#x304F;&#x3068;&#x3082;&#x3053;&#x306E;&#x6BB5;&#x843D;&#x3067;&#x306F;&#x3002;&#x30E9;&#x30C3;&#x30D7;&#x30C8;&#x30C3;&#x30D7;&#x3084;&#x30C7;&#x30B9;&#x30AF;&#x30C8;&#x30C3;&#x30D7;&#x30B3;&#x30F3;&#x30D4;&#x30E5;&#x30FC;&#x30BF;&#x30FC;&#x306F;&#x9B54;&#x6CD5;&#x306E;&#x96FB;&#x6E90;&#x30DC;&#x30BF;&#x30F3;&#x3092;&#x62BC;&#x3059;&#x3068;&#x8D77;&#x52D5;&#x3057;&#x307E;&#x3059;&#x3002;
&#x30DE;&#x30B6;&#x30FC;&#x30DC;&#x30FC;&#x30C9;&#x306F;&#x96FB;&#x6E90;&#x56DE;&#x8DEF;(<a href="https://en.wikipedia.org/wiki/Power_supply" target="_blank">power supply</a>)&#x306B;&#x4FE1;&#x53F7;&#x3092;&#x9001;&#x308A;&#x307E;&#x3059;&#x3002;
&#x4FE1;&#x53F7;&#x3092;&#x53D7;&#x4FE1;&#x3057;&#x305F;&#x5F8C;&#x3001;&#x96FB;&#x6E90;&#x306F;&#x30B3;&#x30F3;&#x30D4;&#x30E5;&#x30FC;&#x30BF;&#x306B;&#x9069;&#x5207;&#x306A;&#x91CF;&#x306E;&#x96FB;&#x529B;&#x3092;&#x4F9B;&#x7D66;&#x3057;&#x307E;&#x3059;&#x3002;
&#x30DE;&#x30B6;&#x30FC;&#x30DC;&#x30FC;&#x30C9;&#x306F;&#x3001;<a href="https://en.wikipedia.org/wiki/Power_good_signal" target="_blank">power good signal</a>&#x3092;&#x53D7;&#x4FE1;&#x3059;&#x308B;&#x3068;&#x3001;CPU&#x3092;&#x8D77;&#x52D5;&#x3057;&#x3088;&#x3046;&#x3068;&#x3057;&#x307E;&#x3059;&#x3002;
CPU&#x306F;&#x30EC;&#x30B8;&#x30B9;&#x30BF;&#x306B;&#x6B8B;&#x3055;&#x308C;&#x305F;&#x30C7;&#x30FC;&#x30BF;&#x3092;&#x30EA;&#x30BB;&#x30C3;&#x30C8;&#x3057;&#x3001;&#x4E8B;&#x524D;&#x306B;&#x5B9A;&#x7FA9;&#x3055;&#x308C;&#x305F;&#x5024;&#x3092;&#x30EC;&#x30B8;&#x30B9;&#x30BF;&#x306B;&#x8A2D;&#x5B9A;&#x3057;&#x307E;&#x3059;&#x3002;</p>
<p><a href="https://en.wikipedia.org/wiki/Intel_80386" target="_blank">80386</a> &#x3084;&#x5F8C;&#x7D99;&#x306E;CPU&#x3067;&#x306F;&#x3001;&#x30B3;&#x30F3;&#x30D4;&#x30E5;&#x30FC;&#x30BF;&#x304C;&#x30EA;&#x30BB;&#x30C3;&#x30C8;&#x3055;&#x308C;&#x308B;&#x3068;&#x6B21;&#x306E;&#x4E8B;&#x524D;&#x306B;&#x5B9A;&#x7FA9;&#x3055;&#x308C;&#x305F;&#x5024;&#x304C;CPU&#x30EC;&#x30B8;&#x30B9;&#x30BF;&#x306B;&#x66F8;&#x304D;&#x8FBC;&#x307E;&#x308C;&#x307E;&#x3059;&#x3002;:</p>
<pre><code>IP          0xfff0
CS selector 0xf000
CS base     0xffff0000
</code></pre><p>&#x30D7;&#x30ED;&#x30BB;&#x30C3;&#x30B5;&#x306F;<a href="https://en.wikipedia.org/wiki/Real_mode" target="_blank">&#x30EA;&#x30A2;&#x30EB;&#x30E2;&#x30FC;&#x30C9;</a>&#x3067;&#x52D5;&#x304D;&#x59CB;&#x3081;&#x307E;&#x3059;&#x3002;&#x5C11;&#x3057;&#x623B;&#x3063;&#x3066;&#x3001;&#x3053;&#x306E;&#x30E2;&#x30FC;&#x30C9;&#x306E; memory segmentation &#x3092;&#x7406;&#x89E3;&#x3057;&#x307E;&#x3057;&#x3087;&#x3046;&#x3002;&#x30EA;&#x30A2;&#x30EB;&#x30E2;&#x30FC;&#x30C9;&#x306F;&#x3001;<a href="https://en.wikipedia.org/wiki/Intel_8086" target="_blank">8086</a>&#x304B;&#x3089;&#x3001;&#x6700;&#x65B0;&#x306E;Intel 64-bit CPU&#x307E;&#x3067;&#x306E;&#x3059;&#x3079;&#x3066;&#x306E;x86&#x4E92;&#x63DB;&#x306E;&#x30D7;&#x30ED;&#x30BB;&#x30C3;&#x30B5;&#x306B;&#x5C0E;&#x5165;&#x3055;&#x308C;&#x3066;&#x3044;&#x307E;&#x3059;&#x3002;
8086&#x30D7;&#x30ED;&#x30BB;&#x30C3;&#x30B5;&#x306B;&#x306F;20-bit &#x30A2;&#x30C9;&#x30EC;&#x30B9;&#x30D0;&#x30B9;&#x304C;&#x3042;&#x308A;&#x307E;&#x3059;&#x3002;&#x3064;&#x307E;&#x308A;&#x3001;0-0xFFFFF(1MB)&#x306E;&#x30A2;&#x30C9;&#x30EC;&#x30B9;&#x7A7A;&#x9593;&#x3092;&#x5229;&#x7528;&#x3067;&#x304D;&#x307E;&#x3059;&#x3002;
&#x3057;&#x304B;&#x3057;&#x3001;16&#x30D3;&#x30C3;&#x30C8;&#x306E;&#x30EC;&#x30B8;&#x30B9;&#x30BF;&#x3057;&#x304B;&#x306A;&#x304F;&#x3001;16&#x30D3;&#x30C3;&#x30C8;&#x306E;&#x30EC;&#x30B8;&#x30B9;&#x30BF;&#x304C;&#x4F7F;&#x7528;&#x3067;&#x304D;&#x308B;&#x30A2;&#x30C9;&#x30EC;&#x30B9;&#x306F;&#x6700;&#x5927;&#x3067; <code>2^16-1</code>&#x3001; &#x307E;&#x305F;&#x306F; <code>0xffff</code>(64KB)&#x307E;&#x3067;&#x3067;&#x3059;&#x3002;<a href="http://en.wikipedia.org/wiki/Memory_segmentation" target="_blank">Memory segmentation</a>&#x306F;&#x3001;&#x5229;&#x7528;&#x53EF;&#x80FD;&#x306A;&#x30A2;&#x30C9;&#x30EC;&#x30B9;&#x7A7A;&#x9593;&#x3059;&#x3079;&#x3066;&#x3092;&#x5229;&#x7528;&#x3059;&#x308B;&#x305F;&#x3081;&#x306B;&#x7528;&#x3044;&#x3089;&#x308C;&#x308B;&#x65B9;&#x6CD5;&#x3067;&#x3059;&#x3002;
&#x5168;&#x3066;&#x306E;&#x30E1;&#x30E2;&#x30EA;&#x306F;65535 Byte&#x307E;&#x305F;&#x306F;64KB&#x306E;&#x56FA;&#x5B9A;&#x9577;&#x306E;&#x5C0F;&#x3055;&#x306A;&#x30BB;&#x30B0;&#x30E1;&#x30F3;&#x30C8;&#x306B;&#x5206;&#x3051;&#x3089;&#x308C;&#x307E;&#x3059;&#x3002;16-bit &#x30EC;&#x30B8;&#x30B9;&#x30BF;&#x3067;&#x306F;&#x3001;64KB&#x4EE5;&#x4E0A;&#x306E;&#x30E1;&#x30E2;&#x30EA;&#x4F4D;&#x7F6E;&#x306B;&#x30A2;&#x30AF;&#x30BB;&#x30B9;&#x3067;&#x304D;&#x306A;&#x3044;&#x306E;&#x3067;&#x3001;&#x5225;&#x306E;&#x65B9;&#x6CD5;&#x3067;&#x30A2;&#x30AF;&#x30BB;&#x30B9;&#x3057;&#x307E;&#x3059;&#x3002;
&#x30A2;&#x30C9;&#x30EC;&#x30B9;&#x306F;2&#x3064;&#x306E;&#x30D1;&#x30FC;&#x30C8;&#x3067;&#x69CB;&#x6210;&#x3055;&#x308C;&#x307E;&#x3059;: &#x30D9;&#x30FC;&#x30B9;&#x30A2;&#x30C9;&#x30EC;&#x30B9;&#x3092;&#x6301;&#x3064;&#x30BB;&#x30B0;&#x30E1;&#x30F3;&#x30C8;&#x30BB;&#x30EC;&#x30AF;&#x30BF;&#x3068;&#x305D;&#x306E;&#x30D0;&#x30FC;&#x30B9;&#x30A2;&#x30C9;&#x30EC;&#x30B9;&#x304B;&#x3089;&#x306E;&#x30AA;&#x30D5;&#x30BB;&#x30C3;&#x30C8;&#x3067;&#x3042;&#x308B;&#x3002;
&#x30EA;&#x30A2;&#x30EB;&#x30E2;&#x30FC;&#x30C9;&#x3067;&#x306F;&#x3001;&#x30BB;&#x30B0;&#x30E1;&#x30F3;&#x30C8;&#x30BB;&#x30EC;&#x30AF;&#x30BF;&#x306E;&#x30D9;&#x30FC;&#x30B9;&#x30A2;&#x30C9;&#x30EC;&#x30B9;&#x306F;<code>Segment Selector * 16</code>&#x3068;&#x306A;&#x308A;&#x307E;&#x3059;&#x3002;
&#x305D;&#x306E;&#x305F;&#x3081;&#x3001;&#x7269;&#x7406;&#x30A2;&#x30C9;&#x30EC;&#x30B9;&#x3092;&#x5F97;&#x308B;&#x306B;&#x306F;&#x3001;&#x30BB;&#x30B0;&#x30E1;&#x30F3;&#x30C8;&#x30A2;&#x30C9;&#x30EC;&#x30B9;&#x306B;16&#x3092;&#x304B;&#x3051;&#x305F;&#x3082;&#x306E;&#x306B;&#x3001;&#x30AA;&#x30D5;&#x30BB;&#x30C3;&#x30C8;&#x30A2;&#x30C9;&#x30EC;&#x30B9;&#x3092;&#x8DB3;&#x3059;&#x5FC5;&#x8981;&#x304C;&#x3042;&#x308A;&#x307E;&#x3059;&#x3002;:</p>
<pre><code>PhysicalAddress = Segment Selector * 16 + Offset
</code></pre><p>&#x4F8B;&#x3048;&#x3070;&#x3001;<code>CS:IP</code>&#x304C;<code>0x2000:0x0010</code>&#x306E;&#x5834;&#x5408;&#x3001;&#x7269;&#x7406;&#x30A2;&#x30C9;&#x30EC;&#x30B9;&#x306F;&#x6B21;&#x306E;&#x3088;&#x3046;&#x306B;&#x306A;&#x308A;&#x307E;&#x3059;&#x3002;:</p>
<pre><code class="lang-python"><span class="hljs-meta">&gt;&gt;&gt; </span>hex((<span class="hljs-number">0x2000</span> &lt;&lt; <span class="hljs-number">4</span>) + <span class="hljs-number">0x0010</span>)
<span class="hljs-string">&apos;0x20010&apos;</span>
</code></pre>
<p>&#x3057;&#x304B;&#x3057;&#x3001;&#x30BB;&#x30B0;&#x30E1;&#x30F3;&#x30C8;&#x90E8;&#x5206;&#x3068;&#x30AA;&#x30D5;&#x30BB;&#x30C3;&#x30C8;&#x90E8;&#x5206;&#x3092;&#x4E21;&#x65B9;&#x6700;&#x5927;&#x306B;&#x3057;&#x305F;&#x5834;&#x5408;&#x3001;&#x3064;&#x307E;&#x308A;<code>0xffff:0xffff</code>&#x306E;&#x5834;&#x5408;&#x306F;&#x6B21;&#x306E;&#x3088;&#x3046;&#x306B;&#x306A;&#x308A;&#x307E;&#x3059;&#x3002;</p>
<pre><code class="lang-python"><span class="hljs-meta">&gt;&gt;&gt; </span>hex((<span class="hljs-number">0xffff</span> &lt;&lt; <span class="hljs-number">4</span>) + <span class="hljs-number">0xffff</span>)
<span class="hljs-string">&apos;0x10ffef&apos;</span>
</code></pre>
<p>&#x3064;&#x307E;&#x308A;&#x3001;&#x6700;&#x521D;&#x306E;1MB&#x3088;&#x308A;&#x3082;65519Byte&#x30AA;&#x30FC;&#x30D0;&#x30FC;&#x3057;&#x3066;&#x3044;&#x308B;&#x3053;&#x3068;&#x306B;&#x306A;&#x308A;&#x307E;&#x3059;&#x3002;&#x30EA;&#x30A2;&#x30EB;&#x30E2;&#x30FC;&#x30C9;&#x3067;&#x30A2;&#x30AF;&#x30BB;&#x30B9;&#x3067;&#x304D;&#x308B;&#x306E;&#x306F;&#x6700;&#x5927;&#x3067;1MB&#x306E;&#x305F;&#x3081;&#x3001;<a href="https://en.wikipedia.org/wiki/A20_line" target="_blank">A20&#x30E9;&#x30A4;&#x30F3;</a>&#x304C;&#x7121;&#x52B9;&#x306B;&#x306A;&#x3063;&#x3066;&#x3044;&#x308B;&#x3068;<code>0x10ffef</code>&#x306F;<code>0x00ffef</code>&#x306B;&#x306A;&#x308A;&#x307E;&#x3059;&#x3002;</p>
<p>&#x30EA;&#x30A2;&#x30EB;&#x30E2;&#x30FC;&#x30C9;&#x3068;memory addressing&#x304C;&#x5206;&#x304B;&#x3063;&#x305F;&#x3068;&#x3053;&#x308D;&#x3067;&#x3001;&#x30EA;&#x30BB;&#x30C3;&#x30C8;&#x5F8C;&#x306E;&#x30EC;&#x30B8;&#x30B9;&#x30BF;&#x306E;&#x5024;&#x306B;&#x3064;&#x3044;&#x3066;&#x8AAC;&#x660E;&#x3057;&#x307E;&#x3057;&#x3087;&#x3046;&#x3002;</p>
<p><code>CS</code>&#x30EC;&#x30B8;&#x30B9;&#x30BF;&#x306F;&#x3001;&#x898B;&#x3048;&#x308B;&#x30BB;&#x30B0;&#x30E1;&#x30F3;&#x30C8;&#x30BB;&#x30EC;&#x30AF;&#x30BF;&#x3068;&#x96A0;&#x308C;&#x305F;&#x30D9;&#x30FC;&#x30B9;&#x30A2;&#x30C9;&#x30EC;&#x30B9;&#x306E;2&#x3064;&#x306E;&#x90E8;&#x5206;&#x3067;&#x69CB;&#x6210;&#x3055;&#x308C;&#x3066;&#x3044;&#x307E;&#x3059;&#x3002; &#x30D9;&#x30FC;&#x30B9;&#x30A2;&#x30C9;&#x30EC;&#x30B9;&#x306F;&#x3001;&#x30BB;&#x30B0;&#x30E1;&#x30F3;&#x30C8;&#x30BB;&#x30EC;&#x30AF;&#x30BF;&#x306E;&#x5024;&#x306B;16&#x3092;&#x4E57;&#x7B97;&#x3059;&#x308B;&#x3053;&#x3068;&#x306B;&#x3088;&#x3063;&#x3066;&#x5F62;&#x6210;&#x3055;&#x308C;&#x308B;&#x304C;&#x3001;&#x30CF;&#x30FC;&#x30C9;&#x30A6;&#x30A7;&#x30A2;&#x304C;&#x30EA;&#x30BB;&#x30C3;&#x30C8;&#x3055;&#x308C;&#x308B;&#x9593;&#x3001;CS&#x30EC;&#x30B8;&#x30B9;&#x30BF;&#x5185;&#x306E;&#x30BB;&#x30B0;&#x30E1;&#x30F3;&#x30C8;&#x30BB;&#x30EC;&#x30AF;&#x30BF;&#x306B;&#x306F;<code>0xf000</code>&#x304C;&#x4EE3;&#x5165;&#x3055;&#x308C;&#x3001;&#x30D9;&#x30FC;&#x30B9;&#x30A2;&#x30C9;&#x30EC;&#x30B9;&#x306B;<code>0xffff0000</code>&#x304C;&#x4EE3;&#x5165;&#x3055;&#x308C;&#x307E;&#x3059;&#x3002; &#x30D7;&#x30ED;&#x30BB;&#x30C3;&#x30B5;&#x306F;&#x3001;<code>CS</code>&#x304C;&#x5909;&#x66F4;&#x3055;&#x308C;&#x308B;&#x307E;&#x3067;&#x3001;&#x3053;&#x306E;&#x7279;&#x6B8A;&#x306A;&#x30D9;&#x30FC;&#x30B9;&#x30A2;&#x30C9;&#x30EC;&#x30B9;&#x3092;&#x4F7F;&#x7528;&#x3057;&#x307E;&#x3059;&#x3002;</p>
<p>&#x958B;&#x59CB;&#x3059;&#x308B;&#x30A2;&#x30C9;&#x30EC;&#x30B9;&#x306F;&#x30D9;&#x30FC;&#x30B9;&#x30A2;&#x30C9;&#x30EC;&#x30B9;&#x3092;EIP&#x30EC;&#x30B8;&#x30B9;&#x30BF;&#x306E;&#x5024;&#x306B;&#x8DB3;&#x3059;&#x3053;&#x3068;&#x3067;&#x751F;&#x6210;&#x3055;&#x308C;&#x307E;&#x3059;&#x3002;:</p>
<pre><code class="lang-python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-number">0xffff0000</span> + <span class="hljs-number">0xfff0</span>
<span class="hljs-string">&apos;0xfffffff0&apos;</span>
</code></pre>
<p>&#x305D;&#x306E;&#x7D50;&#x679C;&#x3001;<code>0xfffffff0</code>&#x304C;&#x3067;&#x304D;&#x3001;&#x3053;&#x306E;&#x5024;&#x306F;4GB&#x3088;&#x308A;16byte&#x5C0F;&#x3055;&#x3044;&#x3067;&#x3059;&#x3002;
&#x3053;&#x306E;&#x30DD;&#x30A4;&#x30F3;&#x30C8;&#x3092;<a href="http://en.wikipedia.org/wiki/Reset_vector" target="_blank">Reset vector</a>&#x3068;&#x547C;&#x3073;&#x307E;&#x3059;&#x3002;
&#x3053;&#x306E;&#x30E1;&#x30E2;&#x30EA;&#x914D;&#x7F6E;&#x306B;&#x306F;&#x3001;&#x30EA;&#x30BB;&#x30C3;&#x30C8;&#x5F8C;&#x306B;CPU&#x304C;&#x6700;&#x521D;&#x306B;&#x5B9F;&#x884C;&#x3059;&#x308B;&#x30D7;&#x30ED;&#x30B0;&#x30E9;&#x30E0;&#x304C;&#x7F6E;&#x304B;&#x308C;&#x3066;&#x3044;&#x307E;&#x3059;&#x3002;
&#x3053;&#x308C;&#x306B;&#x306F;&#x3001;<a href="http://en.wikipedia.org/wiki/JMP_%28x86_instruction%29" target="_blank"><code>JMP</code></a> &#x547D;&#x4EE4;&#x304C;&#x542B;&#x307E;&#x308C;&#x3001;BIOS&#x306E;&#x30A8;&#x30F3;&#x30C8;&#x30EA;&#x30DD;&#x30A4;&#x30F3;&#x30C8;&#x3092;&#x6307;&#x3057;&#x3066;&#x3044;&#x307E;&#x3059;&#x3002;
&#x4F8B;&#x3048;&#x3070;&#x3001;<a href="http://www.coreboot.org/" target="_blank">coreboot</a>&#x306E;&#x30BD;&#x30FC;&#x30B9;&#x30B3;&#x30FC;&#x30C9;&#x3092;&#x898B;&#x308B;&#x3068;&#x3001;&#x6B21;&#x306E;&#x3088;&#x3046;&#x306B;&#x66F8;&#x304B;&#x308C;&#x3066;&#x3044;&#x307E;&#x3059;&#x3002;:</p>
<pre><code class="lang-assembly">    .section &quot;.reset&quot;
    .code16
.globl  reset_vector
reset_vector:
    .byte  0xe9
    .int   _start - ( . + 2 )
    ...
</code></pre>
<p>JMP&#x547D;&#x4EE4;&#x306E;<a href="http://ref.x86asm.net/coder32.html#xE9" target="_blank">&#x30AA;&#x30DA;&#x30B3;&#x30FC;&#x30C9;</a>&#x3067;&#x3042;&#x308B;<code>0xe9</code>&#x3068;&#x3001;&#x305D;&#x306E;&#x30C7;&#x30B9;&#x30C6;&#x30A3;&#x30CD;&#x30FC;&#x30B7;&#x30E7;&#x30F3;&#x30A2;&#x30C9;&#x30EC;&#x30B9;&#x3067;&#x3042;&#x308B;<code>_start - ( . + 2)</code>&#x304C;&#x3042;&#x308A;&#x307E;&#x3059;&#x3002;&#x307E;&#x305F;&#x3001;<code>reset</code>&#x30BB;&#x30AF;&#x30B7;&#x30E7;&#x30F3;&#x304C;16 Byte&#x3067;<code>0xfffffff0</code>&#x304B;&#x3089;&#x59CB;&#x307E;&#x308B;&#x3053;&#x3068;&#x304C;&#x5206;&#x304B;&#x308A;&#x307E;&#x3059;&#x3002;:</p>
<pre><code>SECTIONS {
    _ROMTOP = 0xfffffff0;
    . = _ROMTOP;
    .reset . : {
        *(.reset)
        . = 15 ;
        BYTE(0x00);
    }
}
</code></pre><p>&#x3053;&#x3053;&#x3067;BIOS&#x304C;&#x5B9F;&#x884C;&#x3055;&#x308C;&#x307E;&#x3059;&#x3002;&#x30CF;&#x30FC;&#x30C9;&#x30A6;&#x30A7;&#x30A2;&#x306E;&#x521D;&#x671F;&#x5316;&#x3068;&#x30C1;&#x30A7;&#x30C3;&#x30AF;&#x3092;&#x884C;&#x3044;&#x3001;BIOS&#x306F;&#x30D6;&#x30FC;&#x30C8;&#x3067;&#x304D;&#x308B;&#x30C7;&#x30D0;&#x30A4;&#x30B9;&#x3092;&#x63A2;&#x3059;&#x5FC5;&#x8981;&#x304C;&#x3042;&#x308A;&#x307E;&#x3059;&#x3002;
&#x30D6;&#x30FC;&#x30C8;&#x9806;&#x4F4D;&#x306F;BIOS&#x306E;&#x8A2D;&#x5B9A;&#x306B;&#x4FDD;&#x5B58;&#x3055;&#x308C;&#x3066;&#x304A;&#x308A;&#x3001;&#x30AB;&#x30FC;&#x30CD;&#x30EB;&#x304C;&#x3069;&#x306E;&#x30C7;&#x30D0;&#x30A4;&#x30B9;&#x3092;&#x4F7F;&#x7528;&#x3057;&#x3066;&#x8D77;&#x52D5;&#x3059;&#x308B;&#x306E;&#x304B;&#x3092;&#x64CD;&#x4F5C;&#x3057;&#x307E;&#x3059;&#x3002;
&#x30CF;&#x30FC;&#x30C9;&#x30C9;&#x30E9;&#x30A4;&#x30D6;&#x304B;&#x3089;&#x8D77;&#x52D5;&#x3057;&#x3088;&#x3046;&#x3068;&#x3059;&#x308B;&#x5834;&#x5408;&#x3001;BIOS&#x306F;&#x30D6;&#x30FC;&#x30C8;&#x30BB;&#x30AF;&#x30BF;&#x3092;&#x63A2;&#x305D;&#x3046;&#x3068;&#x3057;&#x307E;&#x3059;&#x3002;
&#x30CF;&#x30FC;&#x30C9;&#x30C7;&#x30A3;&#x30B9;&#x30AF;&#x306B;MBR&#x306E;&#x30D1;&#x30FC;&#x30C6;&#x30A3;&#x30B7;&#x30E7;&#x30F3;&#x304C;&#x3042;&#x308B;&#x5834;&#x5408;&#x3001;&#x30D6;&#x30FC;&#x30C8;&#x30BB;&#x30AF;&#x30BF;&#x306F;&#x6700;&#x521D;&#x306E;&#x30BB;&#x30AF;&#x30BF;&#x30FC;&#xFF08;512 Byte&#xFF09;&#x306E;&#x6700;&#x521D;&#x306E;446 Byte&#x306B;&#x7F6E;&#x304B;&#x308C;&#x3066;&#x3044;&#x307E;&#x3059;&#x3002;&#x6700;&#x521D;&#x306E;&#x30BB;&#x30AF;&#x30BF;&#x30FC;&#x306E;&#x6700;&#x5F8C;2&#x30D0;&#x30A4;&#x30C8;&#x306F;<code>0x55</code>&#x3068;<code>0xaa</code>&#x3067;&#x3001;BIOS&#x306B;&#x3053;&#x306E;&#x30C7;&#x30D0;&#x30A4;&#x30B9;&#x304C;&#x30D6;&#x30FC;&#x30C8;&#x53EF;&#x80FD;&#x3067;&#x3042;&#x308B;&#x3053;&#x3068;&#x3092;&#x77E5;&#x3089;&#x305B;&#x307E;&#x3059;&#x3002;&#x4F8B;:</p>
<pre><code class="lang-assembly">;
; Note: this example is written in Intel Assembly syntax
;
[BITS 16]
[ORG  0x7c00]

boot:
    mov al, &apos;!&apos;
    mov ah, 0x0e
    mov bh, 0x00
    mov bl, 0x07

    int 0x10
    jmp $

times 510-($-$$) db 0

db 0x55
db 0xaa
</code></pre>
<p>&#x30D3;&#x30EB;&#x30C9;&#x3057;&#x3066;&#x5B9F;&#x884C;&#x3057;&#x307E;&#x3059;:</p>
<pre><code>nasm -f bin boot.nasm &amp;&amp; qemu-system-x86_64 boot
</code></pre><p>&#x4E0A;&#x306E;&#x30B3;&#x30FC;&#x30C9;&#x304C;<a href="http://qemu.org" target="_blank">QEMU</a>&#x306B;&#x30C7;&#x30A3;&#x30B9;&#x30AF;&#x30A4;&#x30E1;&#x30FC;&#x30B8;&#x3068;&#x3057;&#x3066;&#x30D3;&#x30EB;&#x30C9;&#x3057;&#x305F;<code>boot</code>&#x30D0;&#x30A4;&#x30CA;&#x30EA;&#x3092;&#x4F7F;&#x7528;&#x3059;&#x308B;&#x3088;&#x3046;&#x547D;&#x4EE4;&#x3057;&#x307E;&#x3059;&#x3002;
&#x4E0A;&#x306E;&#x30A2;&#x30BB;&#x30F3;&#x30D6;&#x30EA;&#x30B3;&#x30FC;&#x30C9;&#x306B;&#x3088;&#x3063;&#x3066;&#x751F;&#x6210;&#x3055;&#x308C;&#x308B;&#x30D0;&#x30A4;&#x30CA;&#x30EA;&#x306F;&#x30D6;&#x30FC;&#x30C8;&#x30BB;&#x30AF;&#x30BF;&#x306E;&#x8981;&#x4EF6;&#xFF08;&#x958B;&#x59CB;&#x4F4D;&#x7F6E;&#x306F;<code>0x7c00</code>&#x306B;&#x8A2D;&#x5B9A;&#x3055;&#x308C;&#x3001;&#x30DE;&#x30B8;&#x30C3;&#x30AF;&#x30B7;&#x30FC;&#x30B1;&#x30F3;&#x30B9;&#x3067;&#x7D42;&#x70B9;&#x3092;&#x6307;&#x5B9A;&#xFF09;&#x3092;&#x6E80;&#x305F;&#x3057;&#x3066;&#x3044;&#x308B;&#x306E;&#x3067;&#x3001;QEMU&#x306F;&#x305D;&#x306E;&#x30D0;&#x30A4;&#x30CA;&#x30EA;&#x3092;&#x30C7;&#x30A3;&#x30B9;&#x30AF;&#x30A4;&#x30E1;&#x30FC;&#x30B8;&#x306E;MBR(master boot record)&#x3068;&#x3057;&#x3066;&#x6271;&#x3044;&#x307E;&#x3059;&#x3002;</p>
<p>&#x3053;&#x306E;&#x3088;&#x3046;&#x306B;&#x306A;&#x308A;&#x307E;&#x3059;:</p>
<p><img src="http://oi60.tinypic.com/2qbwup0.jpg" alt="Simple bootloader which prints only `!`"></p>
<p>&#x3053;&#x306E;&#x4F8B;&#x3067;&#x306F;&#x3001;16-bit &#x30EA;&#x30A2;&#x30EB;&#x30E2;&#x30FC;&#x30C9;&#x3067;&#x30B3;&#x30FC;&#x30C9;&#x304C;&#x5B9F;&#x884C;&#x3055;&#x308C;&#x3001;&#x30E1;&#x30E2;&#x30EA;&#x306E;<code>0x7c00</code>&#x304B;&#x3089;&#x59CB;&#x307E;&#x308A;&#x307E;&#x3059;&#x3002;
&#x5B9F;&#x884C;&#x3055;&#x308C;&#x308B;&#x3068;&#x3001;<a href="http://www.ctyme.com/intr/rb-0106.htm" target="_blank">0x10</a> &#x5272;&#x308A;&#x8FBC;&#x307F;&#x304C;&#x547C;&#x3073;&#x51FA;&#x3055;&#x308C;&#x3001;<code>!</code>&#x30B7;&#x30F3;&#x30DC;&#x30EB;&#x304C;&#x51FA;&#x529B;&#x3055;&#x308C;&#x307E;&#x3059;&#x3002;&#x6B8B;&#x308A;&#x306E;510 Byte&#x3092;0&#x3067;&#x57CB;&#x3081;&#x3001;2&#x3064;&#x306E;&#x30DE;&#x30B8;&#x30C3;&#x30AF;&#x30D0;&#x30A4;&#x30C8;<code>0xaa</code>&#x3068;<code>0x55</code>&#x3067;&#x7D42;&#x308F;&#x308A;&#x307E;&#x3059;&#x3002;</p>
<p><code>objdump</code>&#x3067;&#x30C0;&#x30F3;&#x30D7;&#x3057;&#x305F;&#x7D50;&#x679C;&#x306F;&#x4EE5;&#x4E0B;&#x306E;&#x30B3;&#x30DE;&#x30F3;&#x30C9;&#x3067;&#x898B;&#x308C;&#x307E;&#x3059;:</p>
<pre><code>nasm -f bin boot.nasm
objdump -D -b binary -mi386 -Maddr16,data16,intel boot
</code></pre><p>&#x5B9F;&#x969B;&#x306E;&#x30D6;&#x30FC;&#x30C8;&#x30BB;&#x30AF;&#x30BF;&#x306E;&#x5834;&#x5408;&#x3001;&#x3053;&#x306E;&#x7D9A;&#x304D;&#x306F;&#x591A;&#x304F;&#x306E;0&#x305F;&#x3061;&#x3084;&#x611F;&#x5606;&#x7B26;&#x3067;&#x306F;&#x306A;&#x304F;&#x3001;&#x8D77;&#x52D5;&#x51E6;&#x7406;&#x3068;&#x30D1;&#x30FC;&#x30C6;&#x30A3;&#x30B7;&#x30E7;&#x30F3;&#x30C6;&#x30FC;&#x30D6;&#x30EB;&#x306B;&#x306A;&#x308A;&#x307E;&#x3059;&#x3002;&#x3053;&#x308C;&#x4EE5;&#x964D;&#x306F;BIOS&#x304B;&#x3089;&#x30D6;&#x30FC;&#x30C8;&#x30ED;&#x30FC;&#x30C0;&#x30FC;&#x306B;&#x52D5;&#x4F5C;&#x304C;&#x79FB;&#x308A;&#x307E;&#x3059;&#x3002;</p>
<p><strong>&#x6CE8;</strong>: &#x4E0A;&#x3067;&#x3082;&#x66F8;&#x3044;&#x305F;&#x3088;&#x3046;&#x306B;CPU&#x306F;&#x30EA;&#x30A2;&#x30EB;&#x30E2;&#x30FC;&#x30C9;&#x3067;&#x52D5;&#x4F5C;&#x3057;&#x307E;&#x3059;&#x3002;&#x30EA;&#x30A2;&#x30EB;&#x30E2;&#x30FC;&#x30C9;&#x3067;&#x306F;&#x3001;&#x30E1;&#x30E2;&#x30EA;&#x5185;&#x306E;&#x7269;&#x7406;&#x30A2;&#x30C9;&#x30EC;&#x30B9;&#x3092;&#x6B21;&#x306E;&#x3088;&#x3046;&#x306B;&#x8A08;&#x7B97;&#x3057;&#x307E;&#x3059;&#x3002;:</p>
<pre><code>PhysicalAddress = Segment Selector * 16 + Offset
</code></pre><p>&#x524D;&#x8FF0;&#x3057;&#x305F;&#x3088;&#x3046;&#x306B;&#x3001;16bit &#x306E;&#x6C4E;&#x7528;&#x30EC;&#x30B8;&#x30B9;&#x30BF;&#x3057;&#x304B;&#x306A;&#x304F;&#x3001;16-bit &#x30EC;&#x30B8;&#x30B9;&#x30BF;&#x306E;&#x6700;&#x5927;&#x5024;&#x306F;<code>0xffff</code>&#x306E;&#x305F;&#x3081;&#x3001;&#x6700;&#x5927;&#x5024;&#x3092;&#x53D6;&#x308B;&#x3068;&#x6B21;&#x306E;&#x3088;&#x3046;&#x306B;&#x306A;&#x308A;&#x307E;&#x3059;&#x3002;:</p>
<pre><code class="lang-python"><span class="hljs-meta">&gt;&gt;&gt; </span>hex((<span class="hljs-number">0xffff</span> * <span class="hljs-number">16</span>) + <span class="hljs-number">0xffff</span>)
<span class="hljs-string">&apos;0x10ffef&apos;</span>
</code></pre>
<p>0x10ffef&#x306F;&#x3001;<code>1MB + 64KB - 16B</code>&#x3068;&#x540C;&#x3058;&#x306B;&#x306A;&#x308A;&#x307E;&#x3059;&#x3002;
&#x3057;&#x304B;&#x3057;&#x3001;<a href="https://en.wikipedia.org/wiki/Intel_8086" target="_blank">8086</a>&#x30D7;&#x30ED;&#x30BB;&#x30C3;&#x30B5;&#x306F;&#x3001;&#x30EA;&#x30A2;&#x30EB;&#x30E2;&#x30FC;&#x30C9;&#x304C;&#x642D;&#x8F09;&#x3055;&#x308C;&#x305F;&#x521D;&#x3081;&#x3066;&#x306E;&#x30D7;&#x30ED;&#x30BB;&#x30C3;&#x30B5;&#x3067;&#x3042;&#x308A;&#x3001;A20&#x30A2;&#x30C9;&#x30EC;&#x30B9;&#x30E9;&#x30A4;&#x30F3;&#x3092;&#x6301;&#x3063;&#x3066;&#x3044;&#x307E;&#x3059;&#x3002;
&#x307E;&#x305F;&#x3001;2^20 = 1048576&#x306F;1MB&#x306A;&#x306E;&#x3067;&#x3001;&#x5B9F;&#x969B;&#x306B;&#x4F7F;&#x7528;&#x53EF;&#x80FD;&#x306A;&#x30E1;&#x30E2;&#x30EA;&#x306F;1MB&#x3068;&#x306A;&#x3063;&#x3066;&#x3044;&#x307E;&#x3059;&#x3002;</p>
<p>&#x4E00;&#x822C;&#x7684;&#x306A;&#x30EA;&#x30A2;&#x30EB;&#x30E2;&#x30FC;&#x30C9;&#x3067;&#x306E;&#x30E1;&#x30E2;&#x30EA;&#x30DE;&#x30C3;&#x30D7;&#x306F;&#x6B21;&#x306E;&#x3068;&#x304A;&#x308A;&#x3067;&#x3059;&#x3002;:</p>
<pre><code>0x00000000 - 0x000003FF - Real Mode Interrupt Vector Table
0x00000400 - 0x000004FF - BIOS Data Area
0x00000500 - 0x00007BFF - Unused
0x00007C00 - 0x00007DFF - Our Bootloader
0x00007E00 - 0x0009FFFF - Unused
0x000A0000 - 0x000BFFFF - Video RAM (VRAM) Memory
0x000B0000 - 0x000B7777 - Monochrome Video Memory
0x000B8000 - 0x000BFFFF - Color Video Memory
0x000C0000 - 0x000C7FFF - Video ROM BIOS
0x000C8000 - 0x000EFFFF - BIOS Shadow Area
0x000F0000 - 0x000FFFFF - System BIOS
</code></pre><p>&#x672C;&#x7A3F;&#x306E;&#x6700;&#x521D;&#x306E;&#x90E8;&#x5206;&#x3067;&#x3082;&#x66F8;&#x304D;&#x307E;&#x3057;&#x305F;&#x304C;&#x3001;CPU&#x304C;&#x5B9F;&#x884C;&#x3059;&#x308B;&#x6700;&#x521D;&#x306E;&#x51E6;&#x7406;&#x306F; <code>0xFFFFFFF0</code> &#x30A2;&#x30C9;&#x30EC;&#x30B9;&#x306B;&#x914D;&#x7F6E;&#x3055;&#x308C;&#x3066;&#x3044;&#x307E;&#x3059;&#x3002;
&#x3053;&#x308C;&#x306F;&#x3001;<code>0xFFFFF</code> (1MB)&#x3088;&#x308A;&#x306F;&#x308B;&#x304B;&#x306B;&#x5927;&#x304D;&#x3044;&#x9818;&#x57DF;&#x3067;&#x3059;&#x3002;CPU&#x306F;&#x3069;&#x306E;&#x3088;&#x3046;&#x306B;&#x3057;&#x3066;&#x3053;&#x306E;&#x30EA;&#x30A2;&#x30EB;&#x30E2;&#x30FC;&#x30C9;&#x3067;&#x30A2;&#x30AF;&#x30BB;&#x30B9;&#x3059;&#x308B;&#x306E;&#x3067;&#x3057;&#x3087;&#x3046;&#x304B;&#x3002;
&#x3053;&#x308C;&#x306F;<a href="http://www.coreboot.org/Developer_Manual/Memory_map" target="_blank">coreboot</a>&#x306E;&#x30C9;&#x30AD;&#x30E5;&#x30E1;&#x30F3;&#x30C8;&#x306B;&#x8A18;&#x8F09;&#x3055;&#x308C;&#x3066;&#x3044;&#x307E;&#x3059;&#x3002;:</p>
<pre><code>0xFFFE_0000 - 0xFFFF_FFFF: 128 kilobyte ROM mapped into address space
</code></pre><p>&#x5B9F;&#x884C;&#x6642;&#x3001;BIOS&#x306F;RAM&#x3067;&#x306F;&#x306A;&#x304F;ROM&#x306B;&#x7F6E;&#x304B;&#x308C;&#x3066;&#x3044;&#x307E;&#x3059;&#x3002;</p>
<h2 id="&#x30D6;&#x30FC;&#x30C8;&#x30ED;&#x30FC;&#x30C0;&#x30FC;">&#x30D6;&#x30FC;&#x30C8;&#x30ED;&#x30FC;&#x30C0;&#x30FC;</h2>
<p><a href="https://www.gnu.org/software/grub/" target="_blank">GRUB2</a> &#x3084; <a href="http://www.syslinux.org/wiki/index.php/The_Syslinux_Project" target="_blank">syslinux</a> &#x306E;&#x3088;&#x3046;&#x306A;&#x3001;Linux&#x3092;&#x8D77;&#x52D5;&#x3055;&#x305B;&#x308B;&#x3053;&#x3068;&#x304C;&#x3067;&#x304D;&#x308B;&#x30D6;&#x30FC;&#x30C8;&#x30ED;&#x30FC;&#x30C0;&#x30FC;&#x306F;&#x6570;&#x591A;&#x304F;&#x3042;&#x308A;&#x307E;&#x3059;&#x3002;
Linux&#x30AB;&#x30FC;&#x30CD;&#x30EB;&#x306F;&#x3001;Linux&#x30B5;&#x30DD;&#x30FC;&#x30C8;&#x3092;&#x5B9F;&#x884C;&#x3059;&#x308B;&#x305F;&#x3081;&#x306E;&#x30D6;&#x30FC;&#x30C8;&#x30ED;&#x30FC;&#x30C0;&#x30FC;&#x306B;&#x5FC5;&#x8981;&#x306A;&#x6761;&#x4EF6;&#x3092;&#x6307;&#x5B9A;&#x3059;&#x308B;<a href="https://github.com/torvalds/linux/blob/master/Documentation/x86/boot.txt" target="_blank">Boot protocol</a>&#x3092;&#x6301;&#x3063;&#x3066;&#x3044;&#x307E;&#x3059;&#x3002;
&#x3053;&#x3053;&#x3067;&#x306F;&#x4F8B;&#x3068;&#x3057;&#x3066; GRUB2 &#x306B;&#x3064;&#x3044;&#x3066;&#x8FF0;&#x3079;&#x307E;&#x3059;&#x3002;</p>
<p>BIOS&#x306F;&#x30D6;&#x30FC;&#x30C8;&#x30C7;&#x30D0;&#x30A4;&#x30B9;&#x3092;&#x9078;&#x3093;&#x3067;&#x3001;&#x30D6;&#x30FC;&#x30C8;&#x30BB;&#x30AF;&#x30BF;&#x30B3;&#x30FC;&#x30C9;&#x306B;&#x5BFE;&#x3059;&#x308B;&#x5236;&#x5FA1;&#x3092;&#x4F1D;&#x9054;&#x3057;&#x3001;<a href="http://git.savannah.gnu.org/gitweb/?p=grub.git;a=blob;f=grub-core/boot/i386/pc/boot.S;hb=HEAD" target="_blank">boot.img</a>&#x304B;&#x3089;&#x5B9F;&#x884C;&#x3092;&#x958B;&#x59CB;&#x3057;&#x307E;&#x3059;&#x3002;
&#x3053;&#x306E;&#x30B3;&#x30FC;&#x30C9;&#x306F;&#x3001;&#x5229;&#x7528;&#x53EF;&#x80FD;&#x306A;&#x7A7A;&#x9593;&#x304C;&#x9650;&#x3089;&#x308C;&#x3066;&#x3044;&#x308B;&#x305F;&#x3081;&#x975E;&#x5E38;&#x306B;&#x30B7;&#x30F3;&#x30D7;&#x30EB;&#x3067;&#x3001;GRUB2 &#x306E;&#x30B3;&#x30A2;&#x30A4;&#x30E1;&#x30FC;&#x30B8;&#x306E;&#x4F4D;&#x7F6E;&#x3078;&#x30B8;&#x30E3;&#x30F3;&#x30D7;&#x3059;&#x308B;&#x305F;&#x3081;&#x306E;&#x30DD;&#x30A4;&#x30F3;&#x30BF;&#x3092;&#x542B;&#x3093;&#x3067;&#x3044;&#x307E;&#x3059;&#x3002;
&#x30B3;&#x30A2;&#x30A4;&#x30E1;&#x30FC;&#x30B8;&#x306F; <a href="http://git.savannah.gnu.org/gitweb/?p=grub.git;a=blob;f=grub-core/boot/i386/pc/diskboot.S;hb=HEAD" target="_blank">diskboot.img</a> &#x3067;&#x59CB;&#x307E;&#x308A;&#x307E;&#x3059;&#x304C;&#x3001;&#x6700;&#x521D;&#x306E;&#x30D1;&#x30FC;&#x30C6;&#x30A3;&#x30B7;&#x30E7;&#x30F3;&#x306E;&#x524D;&#x306E;&#x672A;&#x4F7F;&#x7528;&#x306E;&#x30B9;&#x30DA;&#x30FC;&#x30B9;&#x306B;&#x3042;&#x308B;&#x6700;&#x521D;&#x306E;&#x30BB;&#x30AF;&#x30BF;&#x306E;&#x76F4;&#x5F8C;&#x306B;&#x683C;&#x7D0D;&#x3055;&#x308C;&#x307E;&#x3059;&#x3002;
&#x4E0A;&#x8A18;&#x306E;&#x30B3;&#x30FC;&#x30C9;&#x306F;&#x6B8B;&#x308A;&#x306E;&#x30B3;&#x30A2;&#x30A4;&#x30E1;&#x30FC;&#x30B8;&#x3092;&#x30E1;&#x30E2;&#x30EA;&#x306B;&#x30ED;&#x30FC;&#x30C9;&#x3057;&#x307E;&#x3059;&#x304C;&#x3001;&#x305D;&#x308C;&#x306B;&#x306F; GRUB2 &#x306E;&#x30AB;&#x30FC;&#x30CD;&#x30EB;&#x3068;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x30B7;&#x30B9;&#x30C6;&#x30E0;&#x3092;&#x53D6;&#x308A;&#x6271;&#x3046;&#x305F;&#x3081;&#x306E;&#x30C9;&#x30E9;&#x30A4;&#x30D0;&#x3092;&#x542B;&#x3093;&#x3067;&#x3044;&#x307E;&#x3059;&#x3002;
&#x6B8B;&#x308A;&#x306E;&#x30B3;&#x30A2;&#x30A4;&#x30E1;&#x30FC;&#x30B8;&#x3092;&#x30ED;&#x30FC;&#x30C9;&#x3057;&#x305F;&#x5F8C;&#x306B;&#x3001;<a href="http://git.savannah.gnu.org/gitweb/?p=grub.git;a=blob;f=grub-core/kern/main.c" target="_blank">grub_main</a>&#x3092;&#x5B9F;&#x884C;&#x3057;&#x307E;&#x3059;&#x3002;</p>
<p><code>grub_main</code> &#x306F;&#x3001;&#x30B3;&#x30F3;&#x30BD;&#x30FC;&#x30EB;&#x306E;&#x521D;&#x671F;&#x5316;&#x3001;&#x30E2;&#x30B8;&#x30E5;&#x30FC;&#x30EB;&#x306E;&#x305F;&#x3081;&#x306E;&#x30D9;&#x30FC;&#x30B9;&#x30A2;&#x30C9;&#x30EC;&#x30B9;&#x306E;&#x53D6;&#x5F97;&#x3001;&#x30EB;&#x30FC;&#x30C8;&#x30C7;&#x30D0;&#x30A4;&#x30B9;&#x306E;&#x8A2D;&#x5B9A;&#x3001;GRUB&#x8A2D;&#x5B9A;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x306E; &#x30ED;&#x30FC;&#x30C9;/&#x30D1;&#x30FC;&#x30B9;&#x3001;&#x30E2;&#x30B8;&#x30E5;&#x30FC;&#x30EB;&#x306E;&#x30ED;&#x30FC;&#x30C9;&#x306A;&#x3069;&#x3092;&#x884C;&#x3044;&#x307E;&#x3059;&#x3002;&#x5B9F;&#x884C;&#x306E;&#x6700;&#x5F8C;&#x306B;&#x306F;&#x3001;<code>grub_main</code> &#x304C;GRUB&#x3092;&#x901A;&#x5E38;&#x30E2;&#x30FC;&#x30C9;&#x3078;&#x79FB;&#x52D5;&#x3055;&#x305B;&#x307E;&#x3059;&#x3002;
<code>grub_normal_execute</code>&#xFF08;<code>grub-core/normal/main.c</code>&#xFF09;&#x304C;&#x6700;&#x5F8C;&#x306E;&#x6E96;&#x5099;&#x3092;&#x5B8C;&#x4E86;&#x3055;&#x305B;&#x3001;OS&#x3092;&#x9078;&#x629E;&#x3059;&#x308B;&#x305F;&#x3081;&#x306E;&#x30E1;&#x30CB;&#x30E5;&#x30FC;&#x3092;&#x8868;&#x793A;&#x3057;&#x307E;&#x3059;&#x3002;
GRUB&#x30E1;&#x30CB;&#x30E5;&#x30FC;&#x306E;&#x30A8;&#x30F3;&#x30C8;&#x30EA;&#x306E;&#xFF11;&#x3064;&#x3092;&#x9078;&#x629E;&#x3059;&#x308B;&#x3068;&#x304D;&#x3001;<code>grub_menu_execute_entry</code> &#x304C;&#x5B9F;&#x884C;&#x3055;&#x308C;&#x3001;grub<code>boot</code>&#x30B3;&#x30DE;&#x30F3;&#x30C9;&#x3092;&#x5B9F;&#x884C;&#x3057;&#x3066;&#x3001;&#x9078;&#x629E;&#x3057;&#x305F;OS&#x3092;&#x30D6;&#x30FC;&#x30C8;&#x3057;&#x307E;&#x3059;&#x3002;</p>
<p>&#x30AB;&#x30FC;&#x30CD;&#x30EB;&#x306E;&#x30D6;&#x30FC;&#x30C8;&#x30D7;&#x30ED;&#x30C8;&#x30B3;&#x30EB;&#x3092;&#x898B;&#x3066;&#x5206;&#x304B;&#x308B;&#x3088;&#x3046;&#x306B;&#x3001;&#x30D6;&#x30FC;&#x30C8;&#x30ED;&#x30FC;&#x30C0;&#x30FC;&#x306F;&#x30AB;&#x30FC;&#x30CD;&#x30EB;&#x306E;&#x30BB;&#x30C3;&#x30C8;&#x30A2;&#x30C3;&#x30D7;&#x30D8;&#x30C3;&#x30C0;&#x3092;&#x8AAD;&#x307F;&#x8FBC;&#x307F;&#x3001;&#x3044;&#x304F;&#x3064;&#x304B;&#x306E;&#x30D5;&#x30A3;&#x30FC;&#x30EB;&#x30C9;&#x3092;&#x6E80;&#x305F;&#x3055;&#x306A;&#x3051;&#x308C;&#x3070;&#x3044;&#x3051;&#x307E;&#x305B;&#x3093;&#x3002;
&#x305D;&#x3057;&#x3066;&#x305D;&#x308C;&#x306F;&#x3001;&#x30AB;&#x30FC;&#x30CD;&#x30EB;&#x306E;&#x8A2D;&#x5B9A;&#x30B3;&#x30FC;&#x30C9;&#x306E;&#x30AA;&#x30D5;&#x30BB;&#x30C3;&#x30C8; <code>0x01f1</code> &#x304B;&#x3089;&#x59CB;&#x307E;&#x308A;&#x307E;&#x3059;&#x3002;
<a href="https://github.com/torvalds/linux/blob/master/arch/x86/boot/setup.ld#L16" target="_blank">&#x30EA;&#x30F3;&#x30AB;&#x30B9;&#x30AF;&#x30EA;&#x30D7;&#x30C8;</a>&#x3092;&#x898B;&#x308B;&#x3053;&#x3068;&#x3067;&#x3001;&#x3053;&#x306E;&#x30AA;&#x30D5;&#x30BB;&#x30C3;&#x30C8;&#x306F;&#x78BA;&#x8A8D;&#x3067;&#x304D;&#x307E;&#x3059;&#x3002;
&#x30AB;&#x30FC;&#x30CD;&#x30EB;&#x30D8;&#x30C3;&#x30C0;(<a href="https://github.com/torvalds/linux/blob/master/arch/x86/boot/header.S" target="_blank">arch/x86/boot/header.S</a>) &#x306F;&#x6B21;&#x306E;&#x3088;&#x3046;&#x306B;&#x30B9;&#x30BF;&#x30FC;&#x30C8;&#x3057;&#x307E;&#x3059;&#x3002;:</p>
<pre><code class="lang-assembly">    .globl hdr
hdr:
    setup_sects: .byte 0
    root_flags:  .word ROOT_RDONLY
    syssize:     .long 0
    ram_size:    .word 0
    vid_mode:    .word SVGA_MODE
    root_dev:    .word 0
    boot_flag:   .word 0xAA55
</code></pre>
<p>&#x30D6;&#x30FC;&#x30C8;&#x30ED;&#x30FC;&#x30C0;&#x30FC;&#x306F;&#x3001;&#x3053;&#x308C;&#x3068;&#x3001;&#xFF08;<a href="https://github.com/torvalds/linux/blob/master/Documentation/x86/boot.txt#L354" target="_blank">&#x3053;&#x306E;&#x4F8B;</a>&#x306E;&#x3088;&#x3046;&#x306A;Linux&#x30D6;&#x30FC;&#x30C8;&#x30D7;&#x30ED;&#x30C8;&#x30B3;&#x30EB;&#x306E;write&#x3067;&#x30DE;&#x30FC;&#x30AF;&#x3055;&#x308C;&#x3066;&#x3044;&#x308B;&#xFF09;&#x6B8B;&#x308A;&#x306E;&#x30D8;&#x30C3;&#x30C0;&#x3092;&#x3001;&#x30B3;&#x30DE;&#x30F3;&#x30C9;&#x30E9;&#x30A4;&#x30F3;&#x307E;&#x305F;&#x306F;&#x8A08;&#x7B97;&#x3057;&#x6C42;&#x3081;&#x305F;&#x5024;&#x3067;&#x57CB;&#x3081;&#x308B;&#x5FC5;&#x8981;&#x304C;&#x3042;&#x308A;&#x307E;&#x3059;&#x3002;
(&#x30AB;&#x30FC;&#x30CD;&#x30EB;&#x306E;&#x30BB;&#x30C3;&#x30C8;&#x30A2;&#x30C3;&#x30D7;&#x30D8;&#x30C3;&#x30C0;&#x306E;&#x5168;&#x3066;&#x306E;&#x30D5;&#x30A3;&#x30FC;&#x30EB;&#x30C9;&#x306E;&#x8A18;&#x8FF0;&#x3084;&#x8AAC;&#x660E;&#x306B;&#x3064;&#x3044;&#x3066;&#x306F;&#x3053;&#x3053;&#x3067;&#x306F;&#x89E6;&#x308C;&#x307E;&#x305B;&#x3093;&#x304C;&#x3001;&#x5F8C;&#x3067;&#x30AB;&#x30FC;&#x30CD;&#x30EB;&#x304C;&#x3053;&#x308C;&#x3089;&#x3092;&#x4F7F;&#x7528;&#x3059;&#x308B;&#x6642;&#x306B;&#x8AAC;&#x660E;&#x3057;&#x307E;&#x3059;&#x3002;)
<a href="https://github.com/torvalds/linux/blob/master/Documentation/x86/boot.txt#L156" target="_blank">boot protocol</a>&#x3067;&#x5168;&#x3066;&#x306E;&#x30D5;&#x30A3;&#x30FC;&#x30EB;&#x30C9;&#x306E;&#x8A18;&#x8FF0;&#x3092;&#x898B;&#x3064;&#x3051;&#x308B;&#x3053;&#x3068;&#x304C;&#x3067;&#x304D;&#x307E;&#x3059;&#x3002;</p>
<p>&#x30AB;&#x30FC;&#x30CD;&#x30EB;&#x306E;&#x30D6;&#x30FC;&#x30C8;&#x30D7;&#x30ED;&#x30C8;&#x30B3;&#x30EB;&#x3092;&#x898B;&#x3066;&#x5206;&#x304B;&#x308B;&#x3088;&#x3046;&#x306B;&#x3001;&#x30E1;&#x30E2;&#x30EA;&#x30DE;&#x30C3;&#x30D7;&#x306F;&#x30AB;&#x30FC;&#x30CD;&#x30EB;&#x3092;&#x30ED;&#x30FC;&#x30C9;&#x3057;&#x305F;&#x5F8C;&#x3001;&#x6B21;&#x306E;&#x3088;&#x3046;&#x306B;&#x306A;&#x308B;&#x3067;&#x3057;&#x3087;&#x3046;&#x3002;:</p>
<pre><code class="lang-shell">         | Protected-mode &#x30AB;&#x30FC;&#x30CD;&#x30EB;  |
100000   +------------------------+
         | I/O memory hole        |
0A0000   +------------------------+
         | Reserved for BIOS      | Leave as much as possible unused
         ~                        ~
         | Command line           | (Can also be below the X+10000 mark)
X+10000  +------------------------+
         | Stack/heap             | For use by the &#x30AB;&#x30FC;&#x30CD;&#x30EB; real-mode code.
X+08000  +------------------------+
         | Kernel setup           | The &#x30AB;&#x30FC;&#x30CD;&#x30EB; real-mode code.
         | Kernel boot sector     | The &#x30AB;&#x30FC;&#x30CD;&#x30EB; legacy boot sector.
       X +------------------------+
         | Boot loader            | &lt;- Boot sector entry point 0x7C00
001000   +------------------------+
         | Reserved for MBR/BIOS  |
000800   +------------------------+
         | Typically used by MBR  |
000600   +------------------------+
         | BIOS use only          |
000000   +------------------------+
</code></pre>
<p>&#x30D6;&#x30FC;&#x30C8;&#x30ED;&#x30FC;&#x30C0;&#x30FC;&#x304C;&#x30AB;&#x30FC;&#x30CD;&#x30EB;&#x306B;&#x5236;&#x5FA1;&#x3092;&#x79FB;&#x3057;&#x305F;&#x3068;&#x304D;&#x3001;&#x4EE5;&#x4E0B;&#x306E;&#x30A2;&#x30C9;&#x30EC;&#x30B9;&#x3067;&#x958B;&#x59CB;&#x3055;&#x308C;&#x307E;&#x3059;&#x3002;:</p>
<pre><code>X + sizeof(KernelBootSector) + 1
</code></pre><p><code>X</code> &#x304C;&#x30AB;&#x30FC;&#x30CD;&#x30EB;&#x306E;&#x30D6;&#x30FC;&#x30C8;&#x30BB;&#x30AF;&#x30BF;&#x304C;&#x30ED;&#x30FC;&#x30C9;&#x3055;&#x308C;&#x3066;&#x3044;&#x308B;&#x4F4D;&#x7F6E;&#x3092;&#x793A;&#x3057;&#x307E;&#x3059;&#x3002;&#x3053;&#x306E;&#x5834;&#x5408;&#x306F;&#x3001;<code>X</code> &#x304C; <code>0x10000</code> &#x3067;&#x3001;&#x30E1;&#x30E2;&#x30EA;&#x30C0;&#x30F3;&#x30D7;&#x306B;&#x898B;&#x3066;&#x53D6;&#x308C;&#x307E;&#x3059;&#x3002;:</p>
<p><img src="http://oi57.tinypic.com/16bkco2.jpg" alt="kernel first address"></p>
<p>&#x30D6;&#x30FC;&#x30C8;&#x30ED;&#x30FC;&#x30C0;&#x30FC;&#x306F;Linux&#x30AB;&#x30FC;&#x30CD;&#x30EB;&#x3092;&#x30E1;&#x30E2;&#x30EA;&#x3078;&#x30ED;&#x30FC;&#x30C9;&#x3057;&#x3001;&#x30D8;&#x30C3;&#x30C0;&#x306E;&#x30D5;&#x30A3;&#x30FC;&#x30EB;&#x30C9;&#x3092;&#x57CB;&#x3081;&#x3001;&#x8A72;&#x5F53;&#x306E;&#x30E1;&#x30E2;&#x30EA;&#x30A2;&#x30C9;&#x30EC;&#x30B9;&#x3078;&#x30B8;&#x30E3;&#x30F3;&#x30D7;&#x3057;&#x307E;&#x3059;&#x3002;
&#x4ECA;&#x3001;&#x308F;&#x308C;&#x308F;&#x308C;&#x306F;&#x30AB;&#x30FC;&#x30CD;&#x30EB;&#x306E;&#x30BB;&#x30C3;&#x30C8;&#x30A2;&#x30C3;&#x30D7;&#x30B3;&#x30FC;&#x30C9;&#x3078;&#x76F4;&#x63A5;&#x79FB;&#x52D5;&#x3059;&#x308B;&#x3053;&#x3068;&#x304C;&#x3067;&#x304D;&#x307E;&#x3059;&#x3002;</p>
<h2 id="kernel&#x306E;&#x8A2D;&#x5B9A;&#x3092;&#x59CB;&#x3081;&#x308B;">Kernel&#x306E;&#x8A2D;&#x5B9A;&#x3092;&#x59CB;&#x3081;&#x308B;</h2>
<p>&#x308F;&#x308C;&#x308F;&#x308C;&#x306F;&#x3001;&#x3064;&#x3044;&#x306B;&#x30AB;&#x30FC;&#x30CD;&#x30EB;&#x307E;&#x3067;&#x305F;&#x3069;&#x308A;&#x7740;&#x304D;&#x307E;&#x3057;&#x305F;&#x3002;&#x3057;&#x304B;&#x3057;&#x3001;&#x30AB;&#x30FC;&#x30CD;&#x30EB;&#x306F;&#x307E;&#x3060;&#x8D77;&#x52D5;&#x3057;&#x307E;&#x305B;&#x3093;&#x3002;
&#x6700;&#x521D;&#x306B;&#x3001;&#x30AB;&#x30FC;&#x30CD;&#x30EB;&#x3068;&#x30E1;&#x30E2;&#x30EA;&#x7BA1;&#x7406;&#x3001;&#x30D7;&#x30ED;&#x30BB;&#x30B9;&#x7BA1;&#x7406;&#x306A;&#x3069;&#x306E;&#x8A2D;&#x5B9A;&#x304C;&#x5FC5;&#x8981;&#x306B;&#x306A;&#x308A;&#x307E;&#x3059;&#x3002;
&#x30AB;&#x30FC;&#x30CD;&#x30EB;&#x306E;&#x30BB;&#x30C3;&#x30C8;&#x30A2;&#x30C3;&#x30D7;&#x306E;&#x5B9F;&#x884C;&#x306F;<a href="https://github.com/torvalds/linux/blob/master/arch/x86/boot/header.S#L293" target="_blank">_start</a>&#x3067;
<a href="https://github.com/torvalds/linux/blob/master/arch/x86/boot/header.S" target="_blank">arch/x86/boot/header.S</a>&#x304B;&#x3089;&#x958B;&#x59CB;&#x3057;&#x307E;&#x3059;&#x3002;
&#x3044;&#x304F;&#x3064;&#x304B;&#x306E;&#x547D;&#x4EE4;&#x304C;&#x624B;&#x524D;&#x306B;&#x3042;&#x3063;&#x3066;&#x3001;&#x6700;&#x521D;&#x306F;&#x5C11;&#x3057;&#x5947;&#x5999;&#x306B;&#x898B;&#x3048;&#x308B;&#x304B;&#x3082;&#x3057;&#x308C;&#x307E;&#x305B;&#x3093;&#x3002;</p>
<p>&#x6614;&#x306F;Linux&#x30AB;&#x30FC;&#x30CD;&#x30EB;&#x304C;&#x81EA;&#x524D;&#x3067;&#x30D6;&#x30FC;&#x30C8;&#x30ED;&#x30FC;&#x30C0;&#x30FC;&#x3092;&#x6301;&#x3063;&#x3066;&#x3044;&#x307E;&#x3057;&#x305F;&#x3002;&#x3057;&#x304B;&#x3057;&#x3001;&#x4ECA;&#x306F;&#x5B9F;&#x884C;&#x3059;&#x308B;&#x3068;&#x4F8B;&#x306E;&#x3088;&#x3046;&#x306B;&#x306A;&#x308A;&#x307E;&#x3059;&#x3002;</p>
<pre><code>qemu-system-x86_64 vmlinuz-3.18-generic
</code></pre><p>&#x6B21;&#x306E;&#x3088;&#x3046;&#x306A;&#x7D50;&#x679C;&#x304C;&#x898B;&#x3089;&#x308C;&#x308B;&#x306F;&#x305A;&#x3067;&#x3059;&#x3002;:</p>
<p><img src="http://oi60.tinypic.com/r02xkz.jpg" alt="Try vmlinuz in qemu"></p>
<p>&#x5B9F;&#x969B;&#x306F;&#xFF08;&#x753B;&#x50CF;&#x306B;&#x3042;&#x308B;&#xFF09;<a href="https://en.wikipedia.org/wiki/DOS_MZ_executable" target="_blank">MZ</a>&#x304B;&#x3089;header.S&#x304C;&#x958B;&#x59CB;&#x3055;&#x308C;&#x3001;<a href="https://en.wikipedia.org/wiki/Portable_Executable" target="_blank">PE</a>&#x30D8;&#x30C3;&#x30C0;&#x306B;&#x7D9A;&#x3044;&#x3066;&#x3001;&#x30A8;&#x30E9;&#x30FC;&#x30E1;&#x30C3;&#x30BB;&#x30FC;&#x30B8;&#x304C;&#x8868;&#x793A;&#x3055;&#x308C;&#x307E;&#x3059;&#x3002;:</p>
<pre><code class="lang-assembly">#ifdef CONFIG_EFI_STUB
# &quot;MZ&quot;, MS-DOS header
.byte 0x4d
.byte 0x5a
#endif
...
...
...
pe_header:
    .ascii &quot;PE&quot;
    .word 0
</code></pre>
<p>&#x3053;&#x308C;&#x306B;&#x306F;<a href="https://en.wikipedia.org/wiki/Unified_Extensible_Firmware_Interface" target="_blank">UEFI</a>&#x30E2;&#x30FC;&#x30C9;&#x3067;OS&#x3092;&#x8D77;&#x52D5;&#x3059;&#x308B;&#x3053;&#x3068;&#x304C;&#x5FC5;&#x8981;&#x3067;&#x3059;&#x3002;
&#x306B;&#x3053;&#x308C;&#x304C;&#x5185;&#x90E8;&#x3067;&#x52D5;&#x4F5C;&#x3059;&#x308B;&#x304B;&#x3069;&#x3046;&#x304B;&#x78BA;&#x8A8D;&#x3057;&#x307E;&#x305B;&#x3093;&#x304C;&#x3001;&#x7D9A;&#x304F;&#x7AE0;&#x306E;&#x4E2D;&#x306E;1&#x3064;&#x3067;&#x898B;&#x3066;&#x3044;&#x304D;&#x307E;&#x3057;&#x3087;&#x3046;&#x3002;</p>
<p>&#x3053;&#x308C;&#x304C;&#x30AB;&#x30FC;&#x30CD;&#x30EB;&#x30BB;&#x30C3;&#x30C8;&#x30A2;&#x30C3;&#x30D7;&#x306E;&#x30A8;&#x30F3;&#x30C8;&#x30EA;&#x30DD;&#x30A4;&#x30F3;&#x30C8;&#x3067;&#x3059;&#x3002;:</p>
<pre><code class="lang-assembly">// header.S line 292
.globl _start
_start:
</code></pre>
<p>&#x30D6;&#x30FC;&#x30C8;&#x30ED;&#x30FC;&#x30C0;&#x30FC;&#xFF08;grub2&#x306A;&#x3069;&#xFF09;&#x306F;&#x3053;&#x306E;&#x30DD;&#x30A4;&#x30F3;&#x30C8;&#xFF08;<code>MZ</code>&#x304B;&#x3089;&#x306E;&#x30AA;&#x30D5;&#x30BB;&#x30C3;&#x30C8;<code>0x200</code>&#xFF09;&#x3092;&#x77E5;&#x3063;&#x3066;&#x3044;&#x307E;&#x3059;&#x3002;
<code>header.S</code> &#x304C;&#x30A8;&#x30E9;&#x30FC;&#x30E1;&#x30C3;&#x30BB;&#x30FC;&#x30B8;&#x304C;&#x8868;&#x793A;&#x3055;&#x308C;&#x308B;&#x3002;<code>bstext</code>&#x30BB;&#x30AF;&#x30B7;&#x30E7;&#x30F3;&#x304B;&#x3089;&#x59CB;&#x307E;&#x3063;&#x3066;&#x3044;&#x308B;&#x306B;&#x3082;&#x95A2;&#x308F;&#x3089;&#x305A;&#x3001;&#x3053;&#x306E;&#x30A8;&#x30F3;&#x30C8;&#x30EA;&#x30DD;&#x30A4;&#x30F3;&#x30C8;&#x3078;&#x76F4;&#x63A5;&#x30B8;&#x30E3;&#x30F3;&#x30D7;&#x3057;&#x307E;&#x3059;&#x3002;:</p>
<pre><code>//
// arch/x86/boot/setup.ld
//
. = 0;                    // current position
.bstext : { *(.bstext) }  // put .bstext section to position 0
.bsdata : { *(.bsdata) }
</code></pre><p>&#x30AB;&#x30FC;&#x30CD;&#x30EB;&#x30BB;&#x30C3;&#x30C8;&#x30A2;&#x30C3;&#x30D7;&#x306E;&#x30A8;&#x30F3;&#x30C8;&#x30EA;&#x30DD;&#x30A4;&#x30F3;&#x30C8;&#x306F;&#x3053;&#x3061;&#x3089;&#x3067;&#x3059;&#x3002;:</p>
<pre><code class="lang-assembly">    .globl _start
_start:
    .byte  0xeb
    .byte  start_of_setup-1f
1:
    //
    // rest of the header
    //
</code></pre>
<p>&#x3053;&#x3053;&#x3067;&#x306F;<code>start_of_setup-1f</code>&#x306E;&#x30DD;&#x30A4;&#x30F3;&#x30C8;&#x306B;&#x30B8;&#x30E3;&#x30F3;&#x30D7;&#x3059;&#x308B;<code>jmp</code>&#x547D;&#x4EE4;&#x306E;&#x30AA;&#x30DA;&#x30B3;&#x30FC;&#x30C9; <code>0xeb</code>&#x3092;&#x898B;&#x308B;&#x3053;&#x3068;&#x304C;&#x51FA;&#x6765;&#x307E;&#x3059;&#x3002;
<code>Nf</code>&#x8868;&#x8A18;&#x304C;&#x610F;&#x5473;&#x3059;&#x308B;&#x3068;&#x3053;&#x308D;&#x306F;&#x3001;<code>2f</code>&#x304C;&#x6B21;&#x306E;&#x30ED;&#x30FC;&#x30AB;&#x30EB;<code>2:</code>&#x30E9;&#x30D9;&#x30EB;&#x3092;&#x8868;&#x3057;&#x3066;&#x3044;&#x308B;&#x3068;&#x3044;&#x3046;&#x3053;&#x3068;&#x3067;&#x3059;&#x3002;&#x3053;&#x306E;&#x5834;&#x5408;&#x3001;&#x30B8;&#x30E3;&#x30F3;&#x30D7;&#x3057;&#x305F;&#x76F4;&#x5F8C;&#x306B;&#x884C;&#x304F;&#x306E;&#x304C;&#x30E9;&#x30D9;&#x30EB;<code>1</code>&#x3067;&#x3059;&#x3002;
&#x305D;&#x3053;&#x306B;&#x306F;&#x6B8B;&#x308A;&#x306E;<a href="https://github.com/torvalds/linux/blob/master/Documentation/x86/boot.txt#L156" target="_blank">&#x30BB;&#x30C3;&#x30C8;&#x30A2;&#x30C3;&#x30D7;&#x30D8;&#x30C3;&#x30C0;</a>&#x3082;&#x542B;&#x307E;&#x308C;&#x307E;&#x3059;&#x3002;&#x30BB;&#x30C3;&#x30C8;&#x30A2;&#x30C3;&#x30D7;&#x30D8;&#x30C3;&#x30C0;&#x306E;&#x3059;&#x3050;&#x5F8C;&#x306B;&#x3001;<code>start_of_setup</code> &#x30E9;&#x30D9;&#x30EB;&#x3067;&#x958B;&#x59CB;&#x3055;&#x308C;&#x308B;<code>.entrytext</code>&#x304C;&#x3042;&#x308A;&#x307E;&#x3059;&#x3002;</p>
<p>&#x5B9F;&#x969B;&#x306B;&#x306F;&#x3053;&#x308C;&#x304C;&#xFF08;&#x3055;&#x3063;&#x304D;&#x306E;&#x30B8;&#x30E3;&#x30F3;&#x30D7;&#x547D;&#x4EE4;&#x3092;&#x9664;&#x3044;&#x3066;&#xFF09;&#x6700;&#x521D;&#x306B;&#x5B9F;&#x884C;&#x3059;&#x308B;&#x30B3;&#x30FC;&#x30C9;&#x3067;&#x3059;&#x3002;
&#x30AB;&#x30FC;&#x30CD;&#x30EB;&#x30BB;&#x30C3;&#x30C8;&#x30A2;&#x30C3;&#x30D7;&#x306B;&#x30D6;&#x30FC;&#x30C8;&#x30ED;&#x30FC;&#x30C0;&#x30FC;&#x304B;&#x3089;&#x5236;&#x5FA1;&#x3092;&#x79FB;&#x3055;&#x308C;&#x305F;&#x5F8C;&#x306B;&#x3001;&#x6700;&#x521D;&#x306E;<code>jmp</code>&#x547D;&#x4EE4;&#x304C;&#x30AB;&#x30FC;&#x30CD;&#x30EB;&#x306E;&#x30EA;&#x30A2;&#x30EB;&#x30E2;&#x30FC;&#x30C9;&#x306E;&#x958B;&#x59CB;&#x304B;&#x3089;&#x30AA;&#x30D5;&#x30BB;&#x30C3;&#x30C8;<code>0x200</code>&#xFF08;&#x6700;&#x521D;&#x306E;512Byte&#x306E;&#x5F8C;&#xFF09;&#x306B;&#x683C;&#x7D0D;&#x3055;&#x308C;&#x307E;&#x3059;&#x3002;
&#x3053;&#x308C;&#x306F;&#x6B21;&#x306E;Linux &#x30AB;&#x30FC;&#x30CD;&#x30EB;&#x30D6;&#x30FC;&#x30C8;&#x30D7;&#x30ED;&#x30C8;&#x30B3;&#x30EB;&#x3068;grub2&#x306E;&#x30BD;&#x30FC;&#x30B9;&#x30B3;&#x30FC;&#x30C9;&#x3092;&#x898B;&#x3066;&#x5206;&#x304B;&#x308A;&#x307E;&#x3059;&#x3002;:</p>
<pre><code class="lang-C">segment = grub_linux_real_target &gt;&gt; <span class="hljs-number">4</span>;
state.gs = state.fs = state.es = state.ds = state.ss = segment;
state.cs = segment + <span class="hljs-number">0x20</span>;
</code></pre>
<p>&#x30AB;&#x30FC;&#x30CD;&#x30EB;&#x30BB;&#x30C3;&#x30C8;&#x30A2;&#x30C3;&#x30D7;&#x304C;&#x59CB;&#x307E;&#x3063;&#x305F;&#x5F8C;&#x3001;&#x30BB;&#x30B0;&#x30E1;&#x30F3;&#x30C8;&#x30EC;&#x30B8;&#x30B9;&#x30BF;&#x304C;&#x4EE5;&#x4E0B;&#x306E;&#x5024;&#x3092;&#x6301;&#x3064;&#x3053;&#x3068;&#x3092;&#x610F;&#x5473;&#x3057;&#x307E;&#x3059;&#x3002;:</p>
<pre><code>gs = fs = es = ds = ss = 0x1000
cs = 0x1020
</code></pre><p>&#x3053;&#x306E;&#x5834;&#x5408;&#x306F;&#x3001;&#x30AB;&#x30FC;&#x30CD;&#x30EB;&#x304C;<code>0x10000</code>&#x306B;&#x7F6E;&#x304B;&#x308C;&#x307E;&#x3059;&#x3002;</p>
<p><code>start_of_setup</code>&#x306B;&#x30B8;&#x30E3;&#x30F3;&#x30D7;&#x3057;&#x305F;&#x5F8C;&#x306F;&#x3001;&#x30AB;&#x30FC;&#x30CD;&#x30EB;&#x304C;&#x4EE5;&#x4E0B;&#x306E;&#x4F5C;&#x696D;&#x3092;&#x3059;&#x308B;&#x5FC5;&#x8981;&#x304C;&#x3042;&#x308A;&#x307E;&#x3059;&#x3002;:</p>
<ul>
<li>&#x3059;&#x3079;&#x3066;&#x306E;&#x30BB;&#x30B0;&#x30E1;&#x30F3;&#x30C8;&#x30EC;&#x30B8;&#x30B9;&#x30BF;&#x306E;&#x5024;&#x304C;&#x540C;&#x3058;&#x304B;&#x78BA;&#x8A8D;&#x3059;&#x308B;&#x3002;</li>
<li>&#x5FC5;&#x8981;&#x306B;&#x3067;&#x3042;&#x308C;&#x3070;&#x3001;&#x6B63;&#x3057;&#x304F;&#x30B9;&#x30BF;&#x30C3;&#x30AF;&#x3092;&#x30BB;&#x30C3;&#x30C8;&#x30A2;&#x30C3;&#x30D7;&#x3059;&#x308B;&#x3002;</li>
<li><a href="https://en.wikipedia.org/wiki/.bss" target="_blank">bss</a>&#x3092;&#x30BB;&#x30C3;&#x30C8;&#x30A2;&#x30C3;&#x30D7;&#x3059;&#x308B;&#x3002;</li>
<li><a href="https://github.com/torvalds/linux/blob/master/arch/x86/boot/main.c" target="_blank">main.c</a>&#x306E;C&#x30B3;&#x30FC;&#x30C9;&#x306B;&#x30B8;&#x30E3;&#x30F3;&#x30D7;&#x3059;&#x308B;&#x3002;</li>
</ul>
<p>&#x6B21;&#x306F;&#x5B9F;&#x88C5;&#x3092;&#x898B;&#x3066;&#x3044;&#x304D;&#x307E;&#x3057;&#x3087;&#x3046;&#x3002;</p>
<h2 id="&#x30BB;&#x30B0;&#x30E1;&#x30F3;&#x30C8;&#x30EC;&#x30B8;&#x30B9;&#x30BF;&#x306E;&#x30A2;&#x30E9;&#x30A4;&#x30E1;&#x30F3;&#x30C8;">&#x30BB;&#x30B0;&#x30E1;&#x30F3;&#x30C8;&#x30EC;&#x30B8;&#x30B9;&#x30BF;&#x306E;&#x30A2;&#x30E9;&#x30A4;&#x30E1;&#x30F3;&#x30C8;</h2>
<p>&#x307E;&#x305A;&#x3001;&#x30BB;&#x30B0;&#x30E1;&#x30F3;&#x30C8;&#x30EC;&#x30B8;&#x30B9;&#x30BF; <code>ds</code>&#x3068;<code>es</code>&#x304C;&#x540C;&#x3058;&#x30A2;&#x30C9;&#x30EC;&#x30B9;&#x3092;&#x6307;&#x3059;&#x3088;&#x3046;&#x306B;&#x3057;&#x3001;&#x6B21;&#x306B;<code>cld</code>&#x547D;&#x4EE4;&#x3092;&#x5B9F;&#x884C;&#x3057;&#x3066;direction flag&#x3092;&#x30AF;&#x30EA;&#x30A2;&#x3057;&#x307E;&#x3059;&#x3002;:</p>
<pre><code class="lang-assembly">    movw    %ds, %ax
    movw    %ax, %es
    cld
</code></pre>
<p>&#x524D;&#x8FF0;&#x3057;&#x305F;&#x3068;&#x304A;&#x308A;&#x3001;grub2&#x306F;&#x30AB;&#x30FC;&#x30CD;&#x30EB;&#x306E;&#x30BB;&#x30C3;&#x30C8;&#x30A2;&#x30C3;&#x30D7;&#x30B3;&#x30FC;&#x30C9;&#x3092;&#x30A2;&#x30C9;&#x30EC;&#x30B9;<code>0x10000</code>&#x306B;&#x3001;<code>cs</code>&#x306B;<code>0x1020</code>&#x3092;&#x30ED;&#x30FC;&#x30C9;&#x3057;&#x307E;&#x3059;&#x3002;
&#x306A;&#x305C;&#x306A;&#x3089;&#x3001;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x306E;&#x5192;&#x982D;&#x304B;&#x3089;&#x5B9F;&#x884C;&#x3055;&#x308C;&#x308B;&#x306E;&#x3067;&#x306F;&#x306A;&#x304F;&#x3001;&#x4EE5;&#x4E0B;&#x306E;&#x30B3;&#x30FC;&#x30C9;&#x304B;&#x3089;&#x5B9F;&#x884C;&#x3055;&#x308C;&#x308B;&#x304B;&#x3089;&#x3067;&#x3059;&#x3002;</p>
<pre><code class="lang-assembly">_start:
    .byte 0xeb
    .byte start_of_setup-1f
</code></pre>
<p><code>jump</code>&#x547D;&#x4EE4;&#x306F;<a href="https://github.com/torvalds/linux/blob/master/arch/x86/boot/header.S#L47" target="_blank">4d 5a</a>&#x304B;&#x3089;512 Byte&#x96E2;&#x308C;&#x305F;&#x3068;&#x3053;&#x308D;&#x306B;&#x3042;&#x308A;&#x307E;&#x3059;&#x3002;
&#x307E;&#x305F;&#x3001;&#x4ED6;&#x306E;&#x5168;&#x3066;&#x306E;&#x30BB;&#x30B0;&#x30E1;&#x30F3;&#x30C8;&#x30EC;&#x30B8;&#x30B9;&#x30BF;&#x3068;&#x540C;&#x3058;&#x3088;&#x3046;&#x306B;&#x3001;<code>cs</code>&#x3092;<code>0x1020</code>&#x304B;&#x3089;<code>0x10000</code>&#x307E;&#x3067;&#x30A2;&#x30E9;&#x30A4;&#x30F3;&#x3059;&#x308B;&#x5FC5;&#x8981;&#x304C;&#x3042;&#x308A;&#x307E;&#x3059;&#x3002;&#x305D;&#x308C;&#x304C;&#x7D42;&#x308F;&#x3063;&#x305F;&#x3089;&#x30B9;&#x30BF;&#x30C3;&#x30AF;&#x3092;&#x8A2D;&#x5B9A;&#x3057;&#x307E;&#x3059;&#x3002;:</p>
<pre><code class="lang-assembly">    pushw   %ds
    pushw   $6f
    lretw
</code></pre>
<p><code>ds</code>&#x306E;&#x5024;&#x3092;&#x30B9;&#x30BF;&#x30C3;&#x30AF;&#x306B;&#x30D7;&#x30C3;&#x30B7;&#x30E5;&#x3057;&#x3001;&#x30E9;&#x30D9;&#x30EB;<a href="https://github.com/torvalds/linux/blob/master/arch/x86/boot/header.S#L494" target="_blank">6</a>&#x306E;&#x30A2;&#x30C9;&#x30EC;&#x30B9;&#x3082;&#x30B9;&#x30BF;&#x30C3;&#x30AF;&#x306B;&#x30D7;&#x30C3;&#x30B7;&#x30E5;&#x3059;&#x308B;&#x3068;&#x3001;<code>lretw</code>&#x547D;&#x4EE4;&#x304C;&#x5B9F;&#x884C;&#x3055;&#x308C;&#x307E;&#x3059;&#x3002;
<code>lretw</code>&#x547D;&#x4EE4;&#x3092;&#x547C;&#x3073;&#x51FA;&#x3059;&#x3068;&#x3001;&#x30E9;&#x30D9;&#x30EB;6&#x306E;&#x30A2;&#x30C9;&#x30EC;&#x30B9;&#x304C;<a href="https://en.wikipedia.org/wiki/Program_counter" target="_blank">instruction pointer</a>&#x30EC;&#x30B8;&#x30B9;&#x30BF;&#x306B;&#x30ED;&#x30FC;&#x30C9;&#x3055;&#x308C;&#x3001;<code>ds</code>&#x306E;&#x5024;&#x304C;<code>cs</code>&#x306B;&#x30ED;&#x30FC;&#x30C9;&#x3055;&#x308C;&#x307E;&#x3059;&#x3002;
&#x305D;&#x308C;&#x304C;&#x5B8C;&#x4E86;&#x3059;&#x308B;&#x3068;&#x3001;<code>ds</code>&#x3068;<code>cs</code>&#x306F;&#x540C;&#x3058;&#x5024;&#x3092;&#x6301;&#x3064;&#x3088;&#x3046;&#x306B;&#x306A;&#x308A;&#x307E;&#x3059;&#x3002;</p>
<h2 id="&#x30B9;&#x30BF;&#x30C3;&#x30AF;&#x306E;&#x8A2D;&#x5B9A;">&#x30B9;&#x30BF;&#x30C3;&#x30AF;&#x306E;&#x8A2D;&#x5B9A;</h2>
<p>&#x30EA;&#x30A2;&#x30EB;&#x30E2;&#x30FC;&#x30C9;&#x3067;&#x3060;&#x3044;&#x305F;&#x3044;&#x5168;&#x3066;&#x306E;&#x30BB;&#x30C3;&#x30C8;&#x30A2;&#x30C3;&#x30D7;&#x30B3;&#x30FC;&#x30C9;&#x306F;&#x3001;C&#x8A00;&#x8A9E;&#x306E;&#x958B;&#x767A;&#x74B0;&#x5883;&#x3092;&#x4F5C;&#x308B;&#x6E96;&#x5099;&#x3068;&#x306A;&#x308A;&#x307E;&#x3059;&#x3002;&#x6B21;&#x306E;<a href="https://github.com/torvalds/linux/blob/master/arch/x86/boot/header.S#L467" target="_blank">&#x30B9;&#x30C6;&#x30C3;&#x30D7;</a>&#x3067;&#x306F;<code>ss</code>&#x30EC;&#x30B8;&#x30B9;&#x30BF;&#x306E;&#x5024;&#x3092;&#x30C1;&#x30A7;&#x30C3;&#x30AF;&#x3057;&#x3001;&#x3082;&#x3057;<code>ss</code>&#x304C;&#x9593;&#x9055;&#x3063;&#x3066;&#x3044;&#x308B;&#x5834;&#x5408;&#x306F;&#x6B63;&#x3057;&#x3044;&#x30B9;&#x30BF;&#x30C3;&#x30AF;&#x3092;&#x8A2D;&#x5B9A;&#x3057;&#x307E;&#x3059;&#x3002;:</p>
<pre><code class="lang-assembly">    movw    %ss, %dx
    cmpw    %ax, %dx
    movw    %sp, %dx
    je      2f
</code></pre>
<p>&#x3053;&#x308C;&#x306F;&#x3001;&#x7570;&#x306A;&#x308B;3&#x3064;&#x306E;&#x30B7;&#x30CA;&#x30EA;&#x30AA;&#x3092;&#x5C0E;&#x304F;&#x3053;&#x3068;&#x304C;&#x53EF;&#x80FD;&#x3067;&#x3059;&#x3002;:</p>
<ul>
<li><code>ss</code>&#x304C;&#x6709;&#x52B9;&#x5024;0x10000&#x3092;&#x6301;&#x3064;&#xFF08;<code>cs</code>&#x3092;&#x9664;&#x304F;&#x5168;&#x3066;&#x306E;&#x30BB;&#x30B0;&#x30E1;&#x30F3;&#x30C8;&#x30EC;&#x30B8;&#x30B9;&#x30BF;&#x3068;&#x540C;&#x69D8;&#xFF09;</li>
<li><code>ss</code>&#x306F;&#x7121;&#x52B9;&#x3067;&#x3001;<code>CAN_USE_HEAP</code>&#x30D5;&#x30E9;&#x30B0;&#x304C;&#x30BB;&#x30C3;&#x30C8;&#x3055;&#x308C;&#x3066;&#x3044;&#x308B;&#xFF08;&#x4E0B;&#x8A18;&#x53C2;&#x7167;&#xFF09;</li>
<li><code>ss</code>&#x306F;&#x7121;&#x52B9;&#x3067;&#x3001;<code>CAN_USE_HEAP</code>&#x30D5;&#x30E9;&#x30B0;&#x304C;&#x30BB;&#x30C3;&#x30C8;&#x3055;&#x308C;&#x3066;&#x3044;&#x306A;&#x3044;&#xFF08;&#x4E0B;&#x8A18;&#x53C2;&#x7167;&#xFF09;</li>
</ul>
<p>3&#x3064;&#x306E;&#x3059;&#x3079;&#x3066;&#x306E;&#x30B7;&#x30CA;&#x30EA;&#x30AA;&#x3092;&#x5168;&#x3066;&#x898B;&#x3066;&#x307F;&#x307E;&#x3057;&#x3087;&#x3046;&#x3002;</p>
<ul>
<li><code>ss</code>&#x306F;&#x6B63;&#x3057;&#x3044;&#x30A2;&#x30C9;&#x30EC;&#x30B9;&#xFF08;0x10000&#xFF09;&#x3092;&#x6301;&#x3064;&#x3002;&#x3053;&#x306E;&#x5834;&#x5408;&#x3001;&#x30E9;&#x30D9;&#x30EB;<a href="https://github.com/torvalds/linux/blob/master/arch/x86/boot/header.S#L481" target="_blank">2</a>&#x3078;&#x3068;&#x98DB;&#x3073;&#x307E;&#x3059;&#x3002;:</li>
</ul>
<pre><code class="lang-assembly">2:  andw    $~3, %dx
    jnz     3f
    movw    $0xfffc, %dx
3:  movw    %ax, %ss
    movzwl  %dx, %esp
    sti
</code></pre>
<p>&#x3053;&#x3053;&#x3067;&#x3001;<code>dx</code>&#xFF08;&#x30D6;&#x30FC;&#x30C8;&#x30ED;&#x30FC;&#x30C0;&#x30FC;&#x306B;&#x3088;&#x3063;&#x3066;&#x4E0E;&#x3048;&#x3089;&#x308C;&#x308B;<code>sp</code>&#x3092;&#x542B;&#x307F;&#x307E;&#x3059;&#xFF09;&#x304C;4Byte &#x306B;&#x30A2;&#x30E9;&#x30A4;&#x30E1;&#x30F3;&#x30C8;&#x3055;&#x308C;&#x3001;0&#x306B;&#x306A;&#x3063;&#x3066;&#x3044;&#x308B;&#x304B;&#x3069;&#x3046;&#x304B;&#x78BA;&#x8A8D;&#x3067;&#x304D;&#x307E;&#x3059;&#x3002;
&#x3082;&#x3057;0&#x306E;&#x5834;&#x5408;&#x306F;<code>0xfffc</code>&#xFF08;&#x6700;&#x5927;&#x306E;&#x30BB;&#x30B0;&#x30E1;&#x30F3;&#x30C8;&#x30B5;&#x30A4;&#x30BA;&#x306E;64KB&#x3088;&#x308A;&#x524D;&#x3067;4Byte&#x306B;&#x30A2;&#x30E9;&#x30A4;&#x30F3;&#x3055;&#x308C;&#x305F;&#x30A2;&#x30C9;&#x30EC;&#x30B9;&#xFF09;&#x3092;<code>dx</code>&#x306B;&#x4EE3;&#x5165;&#x3057;&#x307E;&#x3059;&#x3002;
0&#x3067;&#x306A;&#x3044;&#x5834;&#x5408;&#x306F;&#x3001;&#x5F15;&#x304D;&#x7D9A;&#x304D;&#x30D6;&#x30FC;&#x30C8;&#x30ED;&#x30FC;&#x30C0;&#x30FC;&#x304B;&#x3089;&#x4E0E;&#x3048;&#x3089;&#x308C;&#x305F;sp&#xFF08;&#x3053;&#x306E;&#x4F8B;&#x3067;&#x306F;0xf7f4&#xFF09;&#x3092;&#x4F7F;&#x3044;&#x307E;&#x3059;&#x3002;
&#x6B63;&#x3057;&#x3044;&#x30BB;&#x30B0;&#x30E1;&#x30F3;&#x30C8;&#x30A2;&#x30C9;&#x30EC;&#x30B9;<code>0x10000</code>&#x3092;&#x683C;&#x7D0D;&#x3057;&#x3066;&#x3044;&#x308B;ss&#x306B;ax&#x306E;&#x5024;&#x3092;&#x4EE3;&#x5165;&#x3057;&#x305F;&#x5F8C;&#x3067;&#x3001;&#x6B63;&#x3057;&#x3044;sp&#x306E;&#x5024;&#x3092;&#x8A2D;&#x5B9A;&#x3057;&#x307E;&#x3059;&#x3002;&#x3053;&#x308C;&#x3067;&#x6B63;&#x3057;&#x304F;&#x30B9;&#x30BF;&#x30C3;&#x30AF;&#x3092;&#x8A2D;&#x5B9A;&#x3067;&#x304D;&#x307E;&#x3057;&#x305F;&#x3002;:</p>
<p><img src="http://oi58.tinypic.com/16iwcis.jpg" alt="stack"></p>
<ul>
<li>2&#x3064;&#x76EE;&#x306E;&#x30B7;&#x30CA;&#x30EA;&#x30AA;&#x3067;&#x306F;&#xFF08;<code>ss</code> != <code>ds</code>&#xFF09;&#x3068;&#x306A;&#x308A;&#x307E;&#x3059;&#x3002;&#x6700;&#x521D;&#x306B;&#x3001;<a href="https://github.com/torvalds/linux/blob/master/arch/x86/boot/setup.ld#L52" target="_blank">_end</a>(&#x30BB;&#x30C3;&#x30C8;&#x30A2;&#x30C3;&#x30D7;&#x30B3;&#x30FC;&#x30C9;&#x306E;&#x6700;&#x5F8C;&#x306E;&#x30A2;&#x30C9;&#x30EC;&#x30B9;)&#x306E;&#x5024;&#x3092;dx&#x306B;&#x7F6E;&#x304D;&#x3001;<code>loadflags</code>&#x306E;&#x30D8;&#x30C3;&#x30C0;&#x30D5;&#x30A3;&#x30FC;&#x30EB;&#x30C9;&#x3092;<code>testb</code>&#x547D;&#x4EE4;&#x3092;&#x4F7F;&#x3063;&#x3066;&#x30C1;&#x30A7;&#x30C3;&#x30AF;&#x3057;&#x3001;&#x30D2;&#x30FC;&#x30D7;&#x9818;&#x57DF;&#x3092;&#x4F7F;&#x3048;&#x308B;&#x304B;&#x3069;&#x3046;&#x304B;&#x3092;&#x78BA;&#x8A8D;&#x3057;&#x307E;&#x3059;&#x3002;<a href="https://github.com/torvalds/linux/blob/master/arch/x86/boot/header.S#L321" target="_blank">loadflags</a>&#x306F;&#x3001;&#x4EE5;&#x4E0B;&#x306E;&#x3088;&#x3046;&#x306B;&#x5B9A;&#x7FA9;&#x3055;&#x308C;&#x308B;&#x30D3;&#x30C3;&#x30C8;&#x30DE;&#x30B9;&#x30AF;&#x30D8;&#x30C3;&#x30C0;&#x3067;&#x3059;&#x3002;:</li>
</ul>
<pre><code class="lang-C"><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> LOADED_HIGH     (1&lt;&lt;0)</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> QUIET_FLAG      (1&lt;&lt;5)</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> KEEP_SEGMENTS   (1&lt;&lt;6)</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> CAN_USE_HEAP    (1&lt;&lt;7)</span>
</code></pre>
<p>&#x305D;&#x3057;&#x3066;&#x30D6;&#x30FC;&#x30C8;&#x30D7;&#x30ED;&#x30C8;&#x30B3;&#x30EB;&#x3092;&#x8AAD;&#x3080;&#x3068;&#x3001;&#x4EE5;&#x4E0B;&#x306E;&#x3088;&#x3046;&#x306B;&#x66F8;&#x304B;&#x308C;&#x3066;&#x3044;&#x307E;&#x3059;&#x3002;</p>
<pre><code>Field name: loadflags

  This field is a bitmask.

  Bit 7 (write): CAN_USE_HEAP
    Set this bit to 1 to indicate that the value entered in the
    heap_end_ptr is valid.  If this field is clear, some setup code
    functionality will be disabled.
</code></pre><p><code>CAN_USE_HEAP</code>&#x306E;bit&#x304C;&#x30BB;&#x30C3;&#x30C8;&#x3055;&#x308C;&#x305F;&#x3068;&#x304D;&#x306F;&#x3001;<code>_end</code>&#x3092;&#x6307;&#x3059;<code>dx</code>&#x306B;<code>heap_end_ptr</code>&#x3092;&#x7F6E;&#x304D;&#x3001;&#x305D;&#x3053;&#x306B;<code>STACK_SIZE</code>&#xFF08;&#x6700;&#x5C0F;&#x306E;&#x30B9;&#x30BF;&#x30C3;&#x30AF;&#x306E;&#x30B5;&#x30A4;&#x30BA;&#x306F;512Byte&#xFF09;&#x3092;&#x52A0;&#x3048;&#x307E;&#x3059;&#x3002;
&#x3053;&#x308C;&#x4EE5;&#x964D;&#x3001;dx&#x304C;&#x30AD;&#x30E3;&#x30EA;&#x30FC;&#x3055;&#x308C;&#x3066;&#x3044;&#x306A;&#x3044;&#x5834;&#x5408;&#xFF08;&#x30AD;&#x30E3;&#x30EA;&#x30FC;&#x3055;&#x308C;&#x3066;&#x306A;&#x3051;&#x308C;&#x3070;&#x3001;dx = _end + 512&#x3068;&#x306A;&#x308B;&#xFF09;&#x3001;&#x30E9;&#x30D9;&#x30EB;<code>2</code>(&#x524D;&#x306E;&#x30B1;&#x30FC;&#x30B9;&#x3068;&#x540C;&#x3058;&#x3088;&#x3046;&#x306B;)&#x306B;&#x30B8;&#x30E3;&#x30F3;&#x30D7;&#x3057;&#x3001;&#x6B63;&#x3057;&#x3044;&#x30B9;&#x30BF;&#x30C3;&#x30AF;&#x3092;&#x4F5C;&#x308A;&#x307E;&#x3059;&#x3002;</p>
<p><img src="http://oi62.tinypic.com/dr7b5w.jpg" alt="stack"></p>
<ul>
<li><code>CAN_USE_HEAP</code>&#x304C;&#x30BB;&#x30C3;&#x30C8;&#x3055;&#x308C;&#x3066;&#x306A;&#x3044;&#x3068;&#x304D;&#x3001;<code>_end</code>&#x304B;&#x3089;<code>_end + STACK_SIZE</code>&#x307E;&#x3067;&#x306E;&#x6700;&#x5C0F;&#x306E;&#x30B9;&#x30BF;&#x30C3;&#x30AF;&#x3092;&#x4F7F;&#x3044;&#x307E;&#x3059;&#x3002;:</li>
</ul>
<p><img src="http://oi60.tinypic.com/28w051y.jpg" alt="minimal stack"></p>
<h2 id="bss&#x306E;&#x8A2D;&#x5B9A;">BSS&#x306E;&#x8A2D;&#x5B9A;</h2>
<p>main&#x95A2;&#x6570;&#x306E;C&#x30B3;&#x30FC;&#x30C9;&#x306B;&#x30B8;&#x30E3;&#x30F3;&#x30D7;&#x3059;&#x308B;&#x524D;&#x306B;&#x5B9F;&#x884C;&#x3059;&#x308B;&#x5FC5;&#x8981;&#x304C;&#x3042;&#x308B;&#x6700;&#x5F8C;&#x306E;2&#x3064;&#x306E;&#x30B9;&#x30C6;&#x30C3;&#x30D7;&#x306F;&#x3001;<a href="https://en.wikipedia.org/wiki/.bss" target="_blank">BSS</a>&#x9818;&#x57DF;&#x3092;&#x8A2D;&#x5B9A;&#x3057;&#x3001;&quot;magic&quot; &#x30B7;&#x30B0;&#x30CD;&#x30A4;&#x30C1;&#x30E3;&#x3092;&#x78BA;&#x8A8D;&#x3059;&#x308B;&#x3053;&#x3068;&#x3067;&#x3059;&#x3002;
&#x6700;&#x521D;&#x306B;&#x3001;&#x30B7;&#x30B0;&#x30CD;&#x30A4;&#x30C1;&#x30E3;&#x3092;&#x78BA;&#x8A8D;&#x3057;&#x307E;&#x3059;:</p>
<pre><code class="lang-assembly">    cmpl    $0x5a5aaa55, setup_sig
    jne     setup_bad
</code></pre>
<p>&#x3053;&#x308C;&#x306F;&#x30B7;&#x30F3;&#x30D7;&#x30EB;&#x306B;&#x3001;<a href="https://github.com/torvalds/linux/blob/master/arch/x86/boot/setup.ld#L39" target="_blank">setup_sig</a>&#x3068;&#x30DE;&#x30B8;&#x30C3;&#x30AF;&#x30CA;&#x30F3;&#x30D0;&#x30FC; <code>0x5a5aaa55</code>&#x3092;&#x6BD4;&#x8F03;&#x3057;&#x3001;&#x7B49;&#x3057;&#x304F;&#x306A;&#x3051;&#x308C;&#x3070; fatal error &#x3092;&#x51FA;&#x3057;&#x307E;&#x3059;&#x3002;</p>
<p>&#x30DE;&#x30B8;&#x30C3;&#x30AF;&#x30CA;&#x30F3;&#x30D0;&#x30FC;&#x304C;&#x7B49;&#x3057;&#x3051;&#x308C;&#x3070;&#x3001;&#x3059;&#x3067;&#x306B;&#x30BB;&#x30B0;&#x30E1;&#x30F3;&#x30C8;&#x30EC;&#x30B8;&#x30B9;&#x30BF;&#x3068;&#x30B9;&#x30BF;&#x30C3;&#x30AF;&#x306E;&#x30BB;&#x30C3;&#x30C8;&#x3092;&#x308F;&#x308C;&#x308F;&#x308C;&#x306F;&#x6301;&#x3063;&#x3066;&#x3044;&#x308B;&#x306E;&#x3067;&#x3001;&#x6B8B;&#x3059;&#x306F;C&#x30B3;&#x30FC;&#x30C9;&#x306B;&#x30B8;&#x30E3;&#x30F3;&#x30D7;&#x3059;&#x308B;&#x524D;&#x306B;BSS&#x9818;&#x57DF;&#x306E;&#x8A2D;&#x5B9A;&#x3092;&#x3059;&#x308B;&#x3060;&#x3051;&#x3067;&#x3059;&#x3002;</p>
<p>BSS&#x30BB;&#x30AF;&#x30B7;&#x30E7;&#x30F3;&#x306F;&#x9759;&#x7684;&#x306B;&#x30A2;&#x30ED;&#x30B1;&#x30FC;&#x30C8;&#x3055;&#x308C;&#x305F;&#x3001;&#x521D;&#x671F;&#x5316;&#x3055;&#x308C;&#x3066;&#x3044;&#x306A;&#x3044;&#x30C7;&#x30FC;&#x30BF;&#x3092;&#x4FDD;&#x5B58;&#x3059;&#x308B;&#x305F;&#x3081;&#x306B;&#x4F7F;&#x308F;&#x308C;&#x307E;&#x3059;&#x3002;Linux&#x3067;&#x306F;&#x4EE5;&#x4E0B;&#x306E;&#x30B3;&#x30FC;&#x30C9;&#x3092;&#x4F7F;&#x3044;&#x3001;&#x3053;&#x306E;&#x30E1;&#x30E2;&#x30EA;&#x9818;&#x57DF;&#x304C;&#x6700;&#x521D;&#x306F;0&#x306B;&#x306A;&#x308B;&#x3053;&#x3068;&#x3092;&#x4FDD;&#x8A3C;&#x3057;&#x307E;&#x3059;&#x3002;</p>
<pre><code class="lang-assembly">    movw    $__bss_start, %di
    movw    $_end+3, %cx
    xorl    %eax, %eax
    subw    %di, %cx
    shrw    $2, %cx
    rep; stosl
</code></pre>
<p>&#x6700;&#x521D;&#x306B;
<a href="https://github.com/torvalds/linux/blob/master/arch/x86/boot/setup.ld#L47" target="_blank">__bss_start</a>&#x306E;&#x30A2;&#x30C9;&#x30EC;&#x30B9;&#x304C; <code>di</code> &#x306B;&#x4EE3;&#x5165;&#x3055;&#x308C;&#x3001;&#x6B21;&#x306B; <code>_end + 3</code>&#xFF08;+3&#x306F;4&#x30D0;&#x30A4;&#x30C8;&#x306B;&#x30A2;&#x30E9;&#x30A4;&#x30F3;&#x3055;&#x308C;&#x3066;&#x3044;&#x308B;&#xFF09;&#x306E;&#x30A2;&#x30C9;&#x30EC;&#x30B9;&#x304C; <code>cx</code> &#x306B;&#x4EE3;&#x5165;&#x3055;&#x308C;&#x307E;&#x3059;&#x3002;
<code>eax</code> &#x30EC;&#x30B8;&#x30B9;&#x30BF;&#x306F;0&#x30AF;&#x30EA;&#x30A2;&#x3055;&#x308C;&#xFF08;<code>xor</code>&#x547D;&#x4EE4;&#x3092;&#x4F7F;&#x3044;&#x307E;&#x3059;&#xFF09;&#x3001;BSS&#x30BB;&#x30AF;&#x30B7;&#x30E7;&#x30F3;&#x306E;&#x30B5;&#x30A4;&#x30BA;&#xFF08;<code>cx</code>-<code>di</code>&#xFF09;&#x304C; <code>cx</code> &#x306E;&#x4E2D;&#x306B;&#x7F6E;&#x304B;&#x308C;&#x307E;&#x3059;&#x3002;
&#x305D;&#x3057;&#x3066; <code>cx</code> &#x306F;2&#x30D3;&#x30C3;&#x30C8;&#x53F3;&#x30B7;&#x30D5;&#x30C8;&#x3059;&#x308B;&#x3053;&#x3068;&#x3067;&#x3001;4&#xFF08;word&#x9577;&#xFF09;&#x3067;&#x5272;&#x3089;&#x308C;&#x3001;<code>stosl</code> &#x547D;&#x4EE4;&#x3092;&#x7E70;&#x308A;&#x8FD4;&#x3057;<code>di</code>&#x304C;&#x6307;&#x3059;&#x30A2;&#x30C9;&#x30EC;&#x30B9;&#x306B; <code>eax</code> &#x306E;&#x5024;&#xFF08;0&#xFF09;&#x3092;&#x683C;&#x7D0D;&#x3057;&#x3066;&#x3001;<code>di</code> &#x306F;&#x81EA;&#x52D5;&#x7684;&#x306B;4&#x305A;&#x3064;&#x5897;&#x52A0;&#x3057;&#x3001;<code>cx</code> &#x304C;0&#x306B;&#x306A;&#x308B;&#x307E;&#x3067;&#x7E70;&#x308A;&#x8FD4;&#x3055;&#x308C;&#x307E;&#x3059;&#x3002;
&#x3053;&#x306E;&#x30B3;&#x30FC;&#x30C9;&#x306E;&#x52B9;&#x679C;&#x306F;&#x3001;<code>__bss_start</code> &#x304B;&#x3089; <code>_end</code>&#x307E;&#x3067;&#x3001;&#x30E1;&#x30E2;&#x30EA;&#x5185;&#x306B;&#x3042;&#x308B;&#x5168;&#x3066;&#x306E;Word&#x3092;&#x901A;&#x3057;&#x3066;&#x3001;0&#x304C;&#x66F8;&#x304D;&#x3053;&#x3080;&#x3053;&#x3068;&#x3067;&#x3059;&#x3002;:</p>
<p><img src="http://oi59.tinypic.com/29m2eyr.jpg" alt="bss"></p>
<h2 id="main&#x95A2;&#x6570;&#x3078;&#x306E;&#x30B8;&#x30E3;&#x30F3;&#x30D7;">main&#x95A2;&#x6570;&#x3078;&#x306E;&#x30B8;&#x30E3;&#x30F3;&#x30D7;</h2>
<p>&#x3053;&#x308C;&#x3067;&#x30B9;&#x30BF;&#x30C3;&#x30AF;&#x3068;BSS&#x306E;&#x6E96;&#x5099;&#x304C;&#x3067;&#x304D;&#x305F;&#x306E;&#x3067;&#x3001;&#x308F;&#x308C;&#x308F;&#x308C;&#x306F; <code>main()</code> &#x306B;&#x98DB;&#x3076;&#x3053;&#x3068;&#x304C;&#x51FA;&#x6765;&#x307E;&#x3059;:</p>
<pre><code class="lang-assembly">    calll main
</code></pre>
<p><code>main()</code> &#x306F; <a href="https://github.com/torvalds/linux/blob/master/arch/x86/boot/main.c" target="_blank">arch/x86/boot/main.c</a>&#x306B;&#x3042;&#x308A;&#x307E;&#x3059;&#x3002; &#x3053;&#x308C;&#x306B;&#x3064;&#x3044;&#x3066;&#x306F;&#x30D1;&#x30FC;&#x30C8;2&#x3067;&#x6271;&#x3044;&#x307E;&#x3059;&#x3002;</p>
<h2 id="&#x307E;&#x3068;&#x3081;">&#x307E;&#x3068;&#x3081;</h2>
<p>&#x3053;&#x308C;&#x3067;&#x3001;Linux &#x30AB;&#x30FC;&#x30CD;&#x30EB; insides&#x306E;&#x6700;&#x521D;&#x306E;&#x30D1;&#x30FC;&#x30C8;&#x306F;&#x7D42;&#x308F;&#x308A;&#x3067;&#x3059;&#x3002;
&#x3082;&#x3057;&#x8CEA;&#x554F;&#x3084;&#x63D0;&#x6848;&#x304C;&#x3042;&#x308C;&#x3070; Twitter <a href="https://twitter.com/0xAX" target="_blank">0xAX</a> &#x3084; <a href="anotherworldofworld@gmail.com">email</a> &#x3067;&#x9023;&#x7D61;&#x3057;&#x3066;&#x3044;&#x305F;&#x3060;&#x304F;&#x304B;&#x3001;Issue&#x3092;&#x4F5C;&#x6210;&#x3057;&#x3066;&#x304F;&#x3060;&#x3055;&#x3044;&#x3002;
&#x6B21;&#x306E;&#x30D1;&#x30FC;&#x30C8;&#x3067;&#x306F;&#x3001;Linux &#x30AB;&#x30FC;&#x30CD;&#x30EB;&#x306E;&#x8A2D;&#x5B9A;&#x3067;&#x5B9F;&#x884C;&#x3059;&#x308B;&#x6700;&#x521D;&#x306E;<code>C&#x30B3;&#x30FC;&#x30C9;</code>&#x3001;<code>memset</code>&#x3001;<code>memcpy</code>&#x3001;<code>earlyprintk</code>&#x306E;&#x5B9F;&#x88C5;&#x3068;&#x3044;&#x3063;&#x305F;&#x30E1;&#x30E2;&#x30EA;&#x30EB;&#x30FC;&#x30C1;&#x30F3;&#x306E;&#x5B9F;&#x88C5;&#x3001;&#x521D;&#x671F;&#x306E;&#x30B3;&#x30F3;&#x30BD;&#x30FC;&#x30EB;&#x306E;&#x5B9F;&#x88C5;&#x3068;&#x521D;&#x671F;&#x5316;&#x306A;&#x3069;&#x3092;&#x898B;&#x3066;&#x3044;&#x304F;&#x4E88;&#x5B9A;&#x3067;&#x3059;&#x3002;</p>
<h2 id="&#x30EA;&#x30F3;&#x30AF;">&#x30EA;&#x30F3;&#x30AF;</h2>
<ul>
<li><a href="http://css.csail.mit.edu/6.858/2014/readings/i386.pdf" target="_blank">Intel 80386 programmer&apos;s reference manual 1986</a></li>
<li><a href="https://www.cs.cmu.edu/~410/doc/minimal_boot.pdf" target="_blank">Minimal Boot Loader for Intel&#xAE; Architecture</a></li>
<li><a href="http://en.wikipedia.org/wiki/Intel_8086" target="_blank">8086</a></li>
<li><a href="http://en.wikipedia.org/wiki/Intel_80386" target="_blank">80386</a></li>
<li><a href="http://en.wikipedia.org/wiki/Reset_vector" target="_blank">Reset vector</a></li>
<li><a href="http://en.wikipedia.org/wiki/Real_mode" target="_blank">Real mode</a></li>
<li><a href="https://www.&#x30AB;&#x30FC;&#x30CD;&#x30EB;.org/doc/Documentation/x86/boot.txt" target="_blank">Linux &#x30AB;&#x30FC;&#x30CD;&#x30EB; boot protocol</a></li>
<li><a href="http://www.coreboot.org/Developer_Manual" target="_blank">CoreBoot developer manual</a></li>
<li><a href="http://www.ctyme.com/intr/int.htm" target="_blank">Ralf Brown&apos;s Interrupt List</a></li>
<li><a href="http://en.wikipedia.org/wiki/Power_supply" target="_blank">Power supply</a></li>
<li><a href="http://en.wikipedia.org/wiki/Power_good_signal" target="_blank">Power good signal</a></li>
</ul>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="./" class="navigation navigation-prev " aria-label="Previous page: Booting">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="linux-bootstrap-2.html" class="navigation navigation-next " aria-label="Next page: First steps in the kernel setup code">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"From bootloader to kernel","level":"1.2.1","depth":2,"next":{"title":"First steps in the kernel setup code","level":"1.2.2","depth":2,"path":"Booting/linux-bootstrap-2.md","ref":"Booting/linux-bootstrap-2.md","articles":[]},"previous":{"title":"Booting","level":"1.2","depth":1,"path":"Booting/README.md","ref":"Booting/README.md","articles":[{"title":"From bootloader to kernel","level":"1.2.1","depth":2,"path":"Booting/linux-bootstrap-1.md","ref":"Booting/linux-bootstrap-1.md","articles":[]},{"title":"First steps in the kernel setup code","level":"1.2.2","depth":2,"path":"Booting/linux-bootstrap-2.md","ref":"Booting/linux-bootstrap-2.md","articles":[]},{"title":"Video mode initialization and transition to protected mode","level":"1.2.3","depth":2,"path":"Booting/linux-bootstrap-3.md","ref":"Booting/linux-bootstrap-3.md","articles":[]},{"title":"Transition to 64-bit mode","level":"1.2.4","depth":2,"path":"Booting/linux-bootstrap-4.md","ref":"Booting/linux-bootstrap-4.md","articles":[]},{"title":"Kernel decompression","level":"1.2.5","depth":2,"path":"Booting/linux-bootstrap-5.md","ref":"Booting/linux-bootstrap-5.md","articles":[]}]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":[],"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"Booting/linux-bootstrap-1.md","mtime":"2019-03-28T07:54:50.379Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2019-03-28T08:16:32.758Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

